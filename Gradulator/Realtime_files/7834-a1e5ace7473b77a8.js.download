"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7834],{94421:function(e,r,t){t.d(r,{r:function(){return T},x:function(){return S}});var a=t(85893),o=t(93717),i=t(57747),s=t(67294),l=t(52091),n=t(82730),d=t(36948),c=t(35541),m=t(83589),p=t(14581),g=t(71293),h=t(93108);let u=e=>{let{asset:r,deleteAsset:t,isMobile:i}=e,{isOpen:s,onOpen:u,onClose:x}=(0,n.q)(),y="asset";return"turbo_image"===r.assetType||"quality_image"===r.assetType?y="image":"stable_video"===r.assetType&&(y="video"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.k,{pos:"absolute",bottom:"0.25rem",left:"0.25rem",onClick:e=>{e.shiftKey?t(r):u()},bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",borderColor:"red.500",_dark:{bg:"gray.900",borderColor:"red.500"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:(0,a.jsx)(d.J,{as:l.Xm5,size:"1rem",color:"red.500"})}),(0,a.jsxs)(c.u_,{isOpen:s,onClose:x,isCentered:!0,size:"sm",children:[(0,a.jsx)(m.Z,{bg:"blackAlpha.500",backdropFilter:"blur(20px)"}),(0,a.jsx)(p.h,{border:"0px",children:(0,a.jsxs)(o.k,{bg:"white",_dark:{bg:"black"},p:"1rem",flexDir:"column",borderRadius:"0.5rem",children:[(0,a.jsx)(g.x,{fontSize:"lg",color:"gray.800",_dark:{color:"gray.200"},children:"Delete ".concat(y)}),(0,a.jsx)(g.x,{my:"0.5rem",fontSize:"md",color:"gray.700",_dark:{color:"gray.400"},children:"This is permanent and cannot be undone."}),!i&&(0,a.jsx)(g.x,{my:"0.5rem",fontSize:"sm",color:"gray.700",_dark:{color:"gray.400"},children:"Tip: hold shift to delete without this warning."}),(0,a.jsxs)(o.k,{justify:"flex-end",mt:"0.5rem",children:[(0,a.jsx)(h.z,{onClick:x,variant:"outline",colorScheme:"gray",children:"Cancel"}),(0,a.jsx)(h.z,{variant:"solid",onClick:()=>{t(r),x()},ml:"0.5rem",colorScheme:"red",children:"Delete"})]})]})})]})]})};var x=t(34651),y=t(71818);let b=e=>{let{asset:r,isMobile:t}=e;async function i(){x.ZP.capture("Download asset",{location:"Library thumbnail"});try{let e=await fetch("".concat(r.assetUrl,"?t=").concat(Date.now())),t=await e.blob(),a=window.URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download="".concat(r.prompt||"image",".").concat(r.assetKey.split(".").pop()),document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>{window.URL.revokeObjectURL(a)},100)}catch(e){console.error("Download failed:",e)}}return(0,a.jsx)(o.k,{pos:"absolute",bottom:"0.25rem",right:"3rem",onClick:i,bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:(0,a.jsx)(d.J,{as:y.yYs,h:"1.25rem",w:"1.25rem",color:"black",_dark:{color:"white"}})})},j=e=>{let{asset:r,favoriteAsset:t}=e;return(0,a.jsx)(o.k,{pos:"absolute",top:"0.25rem",left:"0.25rem",onClick:()=>t(r),bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:r.favorite?(0,a.jsx)(d.J,{as:l.$0H,color:"red"}):(0,a.jsx)(d.J,{as:l.BgW,color:"black",_dark:{color:"white"}})})};var f=t(7963);let w=e=>{let{asset:r,isMobile:t}=e,i=(0,f.p)();return(0,a.jsx)(o.k,{pos:"absolute",bottom:"0.25rem",right:"0.25rem",onClick:function(){x.ZP.capture("Share link",{location:"Library thumbnail"});let e=window.location.origin,o="".concat(e,"/share/").concat(r.uuid),s=!1;if(t)try{navigator.share({title:"Decohere - ".concat(r.prompt||"Untitled"),url:o}),s=!0}catch(e){s=!1}s||(navigator.clipboard.writeText(o),i({title:"Share link copied to clipboard",duration:5e3,isClosable:!0,icon:(0,a.jsx)(y.wk9,{size:"1.3rem"})}))},bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:(0,a.jsx)(d.J,{as:l.Lrt,h:"1.25rem",w:"1.25rem",color:"black",_dark:{color:"white"}})})};var v=t(5460),k=t(18357);let C=e=>{let{imageAspectRatio:r,imageSize:t,asset:o,onSelect:i,hovered:s,isMobile:l}=e;return(0,a.jsx)(k.df,{triggerOnce:!0,children:e=>{let{ref:n,inView:d}=e;return(0,a.jsx)(v.E,{loading:d?"eager":"lazy","fetch-priority":d?"high":"low",ref:n,id:"video",alt:"thumbnail",border:"1px",borderColor:s?"gray.500":"transparent",_dark:{borderColor:s?"primary.500":"transparent"},cursor:"pointer",borderRadius:"0.5rem",height:S[t][l?"mobile":"desktop"][r].height,width:S[t][l?"mobile":"desktop"][r].width,objectFit:"contain",src:o.thumbnailUrl,fallbackSrc:"/empty-frame.webp",fallbackStrategy:"onError",draggable:"false",onClick:i,onContextMenu:e=>e.preventDefault()})}})},S={small:{desktop:{wide:{height:"calc(11.25rem + 2px)",width:"calc(20rem + 2px)"},square:{height:"calc(12.3rem + 2px)",width:"calc(12.3rem + 2px)"},tall:{height:"calc(21.8rem + 2px)",width:"calc(12.28rem + 2px)"}},mobile:{wide:{height:"calc(6.05rem + 2px)",width:"calc(10.75rem + 2px)"},square:{height:"calc(10.8rem + 2px)",width:"calc(10.8rem + 2px)"},tall:{height:"calc(19.1rem + 2px)",width:"calc(10.75rem + 2px)"}}},medium:{desktop:{wide:{height:"calc(14.175rem + 2px)",width:"calc(25.2rem + 2px)"},square:{height:"calc(16.6rem + 2px)",width:"calc(16.6rem + 2px)"},tall:{height:"calc(25.15rem + 2px)",width:"calc(14.15rem + 2px)"}},mobile:{wide:{height:"calc(14.175rem + 2px)",width:"calc(25.2rem + 2px)"},square:{height:"calc(14.15rem + 2px)",width:"calc(14.15rem + 2px)"},tall:{height:"calc(25.15rem + 2px)",width:"calc(14.15rem + 2px)"}}},large:{desktop:{wide:{height:"calc(19rem + 2px)",width:"calc(33.75rem + 2px)"},square:{height:"calc(25.2rem + 2px)",width:"calc(25.2rem + 2px)"},tall:{height:"calc(35.56rem + 2px)",width:"calc(20rem + 2px)"}},mobile:{wide:{height:"calc(12.375rem + 2px)",width:"calc(22rem + 2px)"},square:{height:"calc(22rem + 2px)",width:"calc(22rem + 2px)"},tall:{height:"calc(39.1rem + 2px)",width:"calc(22rem + 2px)"}}}},_=e=>{let{asset:r}=e;return(0,a.jsx)(o.k,{pos:"absolute",top:"0.25rem",right:"0.25rem",bg:"white",border:"1px",borderColor:"gray.200",_dark:{bg:"black",borderColor:"gray.800"},h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",children:"stable_video"===r.assetType?(0,a.jsx)(l.KoQ,{}):(0,a.jsx)(l.H3h,{})})},z=e=>{let{asset:r}=e;return"upscaled"in r&&r.upscaled?(0,a.jsx)(o.k,{pos:"absolute",top:"0.25rem",bg:"white",border:"1px",borderColor:"gray.200",_dark:{bg:"black",borderColor:"gray.800"},right:"3rem",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",children:(0,a.jsx)(l.PcH,{size:"1rem"})}):(0,a.jsx)(a.Fragment,{})},T=(0,s.memo)(e=>{let{isMobile:r,asset:t,accountDetails:l,onSelect:n,favoriteAsset:d,deleteAsset:c,imageSize:m,imageAspectRatio:p}=e,[g,h]=(0,s.useState)(!1),x="none"===l.planType&&r,{ref:y,inView:f}=(0,k.YD)({threshold:.3});return f?(0,a.jsxs)(i.xu,{ref:y,m:"4px",pos:"relative",cursor:"pointer",onContextMenu:e=>e.preventDefault(),onMouseEnter:()=>{r||h(!0)},onMouseLeave:()=>{r||h(!1)},bg:"gray.200",_dark:{bg:"gray.800"},borderRadius:"0.5rem",userSelect:"none",height:S[m][r?"mobile":"desktop"][p].height,width:S[m][r?"mobile":"desktop"][p].width,children:[(0,a.jsx)(C,{imageAspectRatio:p,imageSize:m,isMobile:r,asset:t,hovered:g,onSelect:n}),x&&(0,a.jsx)(o.k,{pos:"absolute",opacity:"0",h:"100%",w:"100%",top:"0px",zIndex:1,onClick:n,onContextMenu:e=>e.preventDefault(),userSelect:"none"}),g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{asset:t,favoriteAsset:d}),(0,a.jsx)(w,{asset:t,isMobile:r}),(0,a.jsx)(b,{asset:t,isMobile:r}),(0,a.jsx)(u,{asset:t,deleteAsset:c,isMobile:r}),(0,a.jsx)(z,{asset:t})]}),(0,a.jsx)(_,{asset:t})]}):(0,a.jsx)(i.xu,{ref:y,m:"4px",pos:"relative",cursor:"pointer",onContextMenu:e=>e.preventDefault(),onMouseEnter:()=>{r||h(!0)},onMouseLeave:()=>{r||h(!1)},bg:"gray.200",_dark:{bg:"gray.800"},borderRadius:"0.5rem",userSelect:"none",height:S[m][r?"mobile":"desktop"][p].height,width:S[m][r?"mobile":"desktop"][p].width})});T.displayName="AssetThumbnail"},85424:function(e,r,t){t.d(r,{D8:function(){return h},Sm:function(){return x},YL:function(){return y},nl:function(){return u}});var a=t(85893),o=t(93717),i=t(5460),s=t(25324),l=t(71293),n=t(67294),d=t(49870),c=t(45689),m=t(82915),p=t(94421),g=t(58156);let h=65,u=25,x=45,y=25,b=e=>{let r,{job:t,imageSize:b,imageAspectRatio:j}=e,[f,w]=(0,n.useState)(0),v=t.type===m.O.UpscaleImage||t.type===m.O.StableVideo,k=(0,d.Z)(v?"/api/assets/getS3Object?projectId=".concat(t.projectId,"&key=").concat(t.srcImageKey):null).data,C=(0,c.Z)(),[S,_]=(0,n.useState)(!1);if(t.type===m.O.UpscaleImage)r=h;else if(t.type===m.O.QualityImage||t.type===m.O.TemplateImage)r=y;else if(t.type===m.O.LoraImage)r=45;else{let e=void 0===t.friendlyName||""===t.friendlyName;r=e?x:u}(0,n.useEffect)(()=>{let e=setInterval(()=>{0===t.startTime?w(0):w(Math.min(99,(Date.now()-t.startTime)/(1e3*r)*100))},1e3);return()=>clearInterval(e)},[r,t.startTime]);let z=0===t.startTime?"Queued...":"".concat(f.toFixed(0),"%");return(0,a.jsxs)(o.k,{display:S?"none":"flex",m:"0.25rem",height:p.x[b][C?"mobile":"desktop"][j].height,width:p.x[b][C?"mobile":"desktop"][j].width,border:"1px",borderColor:"gray.600",onContextMenu:e=>e.preventDefault(),alignItems:"center",justifyContent:"center",borderRadius:"0.5rem",position:"relative",_hover:{borderColor:"primary.400"},bg:"gray.800",children:[k&&(0,a.jsx)(i.E,{pos:"absolute",alt:"image",objectFit:"cover",height:p.x[b][C?"mobile":"desktop"][j].height,width:p.x[b][C?"mobile":"desktop"][j].width,src:k.presignedUrl,style:{filter:"blur(2px) brightness(50%)"}}),(0,a.jsx)(s.D,{value:f,color:"primary.500",size:C?"5.5rem":"7.5rem",thickness:"3px",trackColor:"gray.200"}),(0,a.jsx)(l.x,{noOfLines:1,w:"4.5rem",position:"absolute",fontSize:"14px",textAlign:"center",userSelect:"none",color:"gray.100",children:z}),(0,a.jsx)(g.s,{submissionTime:t.submissionTime,projectId:t.projectId,status:t.status,setIsDeleted:_})]})};r.ZP=b},58156:function(e,r,t){t.d(r,{s:function(){return g}});var a=t(85893),o=t(7963),i=t(82730),s=t(93717),l=t(35541),n=t(83589),d=t(14581),c=t(71293),m=t(93108),p=t(86204);let g=e=>{let{submissionTime:r,projectId:t,setIsDeleted:g,status:h}=e,u=(0,o.p)(),{isOpen:x,onOpen:y,onClose:b}=(0,i.q)(),j=async()=>{try{let e=await fetch("/api/jobs/cancelJob?submissionTime=".concat(r,"&projectId=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();if(e.ok)g(!0);else throw Error(null==a?void 0:a.message)}catch(e){u({title:"".concat(e),status:"error",duration:5e3,isClosable:!0,position:"top"})}},f=e=>{e.shiftKey?j():y()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.k,{pos:"absolute",right:"0.25rem",top:"0.25rem",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",cursor:"pointer",bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",onClick:f,align:"center",justify:"center",display:"queued"===h?"flex":"none",children:(0,a.jsx)(p._0w,{size:"1rem",color:"#dc4a41"})}),(0,a.jsxs)(l.u_,{isOpen:x,onClose:b,isCentered:!0,size:"xs",children:[(0,a.jsx)(n.Z,{bg:"whiteAlpha.500",_dark:{bg:"blackAlpha.500"},backdropFilter:"blur(20px)"}),(0,a.jsx)(d.h,{border:"1px",borderColor:"gray.200",borderRadius:"0.5rem",overflow:"hidden",_dark:{borderColor:"gray.700"},children:(0,a.jsxs)(s.k,{bg:"white",p:"1rem",flexDir:"column",borderRadius:"0.5rem",_dark:{bg:"gray.800"},children:[(0,a.jsx)(c.x,{fontSize:"lg",textColor:"gray.700",_dark:{textColor:"gray.200"},children:"Cancel Job"}),(0,a.jsx)(c.x,{my:"0.5rem",fontSize:"md",color:"gray.700",_dark:{color:"gray.400"},children:"This is permanent and cannot be undone."}),(0,a.jsxs)(s.k,{justify:"flex-end",children:[(0,a.jsx)(m.z,{onClick:b,variant:"outline",colorScheme:"gray",children:"Cancel"}),(0,a.jsx)(m.z,{variant:"solid",onClick:async()=>{await j(),b()},ml:"0.5rem",colorScheme:"red",children:"Confirm"})]})]})})]})]})}},90645:function(e,r,t){t.d(r,{M:function(){return p}});var a=t(85893),o=t(93717),i=t(57747),s=t(5460),l=t(45966),n=t(67294),d=t(50864),c=t.n(d),m=t(7423);function p(e,r,t,a,o,i,s){r-=128,o||s?i?e-=16:e-=448:i?e-=90:e-=300;let l=t/a,n=t,d=a;return n>e&&(d=(n=e)/l),d>r&&(n=(d=r)*l),{displayWidth:n,displayHeight:d}}let g=e=>{let{assetUrl:r,width:t,height:s,isSkinny:l}=e;return(0,a.jsx)(o.k,{w:"100%",align:"center",justify:"center",children:(0,a.jsx)(i.xu,{as:"video",src:r,autoPlay:!0,playsInline:!0,controls:!0,loop:!0,borderRadius:"16px",width:"".concat(t,"px"),height:"".concat(s,"px"),objectFit:"contain",mt:l?"1.5rem":"0",onContextMenu:e=>e.preventDefault()})})},h=e=>{let{assetUrl:r,width:t,height:i,isSkinny:l}=e;return(0,a.jsx)(o.k,{align:"center",justify:"center",children:(0,a.jsx)(s.E,{src:r,alt:"image",borderRadius:"16px",width:t?"".concat(t,"px"):"100%",height:i?"".concat(i,"px"):"100%",maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain",mt:l?"1.5rem":"0",draggable:!1})})},u=e=>{let{assetUrl:r,originalUrl:t,width:d,height:m,isSkinny:p}=e,[g,h]=(0,n.useState)(!1);return(0,a.jsxs)(o.k,{w:"100%",align:"center",justify:"center",position:"relative",children:[g&&(0,a.jsx)(i.xu,{borderRadius:"16px",width:"".concat(d,"px"),height:"".concat(m,"px"),objectFit:"contain",overflow:"hidden",mt:p?"1.5rem":"0",onContextMenu:e=>e.preventDefault(),children:(0,a.jsx)(c(),{leftImage:r,rightImage:t,sliderLineColor:"#e7e7ea",sliderPositionPercentage:.9,handleSize:30})}),!g&&(0,a.jsx)(s.E,{src:r,alt:"image",borderRadius:"16px",width:"".concat(d,"px"),height:"".concat(m,"px"),objectFit:"contain",mt:p?"1.5rem":"0",draggable:!1}),(0,a.jsx)(o.k,{bg:"grayAlpha.800",borderRadius:"16px",h:"2rem",w:"7rem",position:"absolute",top:p?"1.5rem":"0",right:"0",align:"center",justify:"center",cursor:"pointer",children:(0,a.jsx)(l.X,{size:"md",isChecked:g,onChange:()=>h(!g),h:"100%",w:"100%",px:"1rem",textColor:"gray.200",fontSize:"16px",children:"Compare"})})]})},x=e=>{let{asset:r,isMobile:t,isModal:o}=e,{width:i,height:s}=(0,m.ZP)(),l=i<800||t,n="turbo_image"===r.assetType||"import_image"===r.assetType||"quality_image"===r.assetType||"template_output"===r.assetType,d=n&&"originalUrl"in r&&r.originalUrl,{displayWidth:c,displayHeight:x}=p(i,s,r.width,r.height,t,l,o);return n?d?(0,a.jsx)(u,{assetUrl:r.assetUrl,originalUrl:r.originalUrl,width:c,height:x,isSkinny:l}):(0,a.jsx)(h,{assetUrl:r.assetUrl,width:c,height:x,isSkinny:l}):(0,a.jsx)(g,{assetUrl:r.assetUrl,width:c,height:x,isSkinny:l})};r.Z=x},1121:function(e,r,t){t.d(r,{s:function(){return a}});let a=async e=>{let{projectId:r,lastEvaluatedKey:t,pageSize:a,assetTypes:o}=e,i=await fetch("/api/assets/listAssets?projectId=".concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageSize:a,lastEvaluatedKey:t,assetTypes:o||["stable_video","turbo_image","import_image","quality_image"]})});if(!i.ok)return{items:[],lastEvaluatedKey:void 0};let s=await i.json();return s}},7834:function(e,r,t){t.d(r,{rA:function(){return e8},Ao:function(){return e7}});var a=t(85893),o=t(11310),i=t(18094),s=t(11163),l=t(67294),n=t(59820),d=t(93717),c=t(81136),m=t(58533),p=t(18357),g=t(7963),h=t(71293),u=t(5460),x=t(93108),y=t(52091);let b=e=>{let{asset:r,focusRef:t,setUploadImage:o,setMode:i,onClose:n}=e,c=(0,g.p)(),[m,p]=(0,l.useState)(!1),{asPath:b}=(0,s.useRouter)(),j=async()=>{try{var e,a;let s;if(p(!0),"faceFeaturesUrl"in r&&r.faceFeaturesUrl&&r.submissionTime>1716490824e3){let e=await fetch(r.faceFeaturesUrl);if(200!==e.status)throw Error("Reuse reference person failed unexpectedly, please try again");s=await e.json()}else throw Error("Could not reuse this reference person.");null==o||o({key:"referenceKey"in r?r.referenceKey:"",uuid:"referenceUuid"in r?r.referenceUuid:"",url:"referenceUrl"in r?r.referenceUrl:"",faceFeatures:s,faceFeaturesKey:r.faceFeaturesKey}),p(!1),null==i||i("reference"),null==t||null===(e=t.current)||void 0===e||e.focus(),null==t||null===(a=t.current)||void 0===a||a.scrollIntoView(),n()}catch(e){p(!1),c({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}};return"referenceKey"in r&&r.referenceKey?(0,a.jsxs)(d.k,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",children:[(0,a.jsx)(h.x,{textColor:"gray.800",_dark:{textColor:"gray.400"},fontSize:"lg",mb:"0.5rem",userSelect:"none",children:"Reference person"}),(0,a.jsx)(d.k,{pos:"relative",children:(0,a.jsx)(u.E,{src:r.referenceUrl,alt:"Image",borderRadius:"0.5rem",maxH:"8rem",mb:"0.5rem"})}),b.includes("realtime")&&(0,a.jsx)(d.k,{flexDir:"row",alignItems:"center",children:(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",onClick:j,isDisabled:m,children:[(0,a.jsx)(y.Xws,{}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Reuse reference"})]})})]}):(0,a.jsx)(a.Fragment,{})};var j=t(70114),f=t(7423),w=t(35541),v=t(83589),k=t(14581),C=t(66205),S=t(57747),_=t(90645),z=t(50357),T=t(70680);let I=e=>{let{asset:r}=e,t=(r.creativity/T.xP*10).toFixed(0);return -1===r.creativity?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(d.k,{flexDir:"column",align:"center",justify:"center",h:"3rem",w:"12rem",mb:"1rem",children:[(0,a.jsx)(h.x,{_dark:{textColor:"gray.300"},textColor:"gray.800",fontSize:"md",mb:"0.75rem",userSelect:"none",w:"100%",textAlign:"center",children:"Upscale creativity: ".concat(t)}),(0,a.jsx)(z.iR,{min:T.FB,max:T.xP,step:.1,w:"10rem",value:r.creativity,cursor:"default",children:(0,a.jsx)(z.Uj,{h:"1.1rem",children:(0,a.jsx)(z.Ms,{color:"primary"})})})]})};var R=t(27083),A=t(48783),D=t(34292),E=t(79078),K=t(68519),M=t(89993),U=t(36948),F=t(86204),O=t(30080);let P=e=>{let{asset:r,isSkinny:t,setPrompt:o,setSeed:i,setGenerateMode:n,setOriginalSeed:c,setOriginalPrompt:m,setAspectRatio:p,onModalClose:g,reuseFocusRef:u}=e,{push:y,asPath:b}=(0,s.useRouter)(),[j,f]=(0,l.useState)(!1),w=()=>{navigator.clipboard.writeText(r.prompt).then(()=>{f(!0),setTimeout(()=>f(!1),2e3)})},v=()=>{let e=r.seed;"imageSeed"in r&&(e=r.imageSeed),e<=0&&(e=Math.floor(Math.random()*(R.Di-R.KZ)+R.KZ));let t="wide";if(r.height/r.width>1?t="tall":r.height/r.width==1&&(t="square"),b.startsWith("/realtime")){if(i&&i(e),o&&o(r.prompt),n&&n("turbo"),c&&c(e),m&&m(r.prompt),p&&p(t),g&&g(),u){var a,s;null===(a=u.current)||void 0===a||a.focus(),null===(s=u.current)||void 0===s||s.scrollIntoView()}return}let l=r.prompt,d=new URLSearchParams;d.set("prompt",l),d.set("seed",e.toString()),d.set("mode","turbo"),d.set("aspectRatio",t);let h=btoa(d.toString());y(h?"/realtime?params=".concat(h):"/realtime")};if(!r.prompt)return null;let k=r.prompt;if("friendlyName"in r&&r.friendlyName&&(k=r.friendlyName),"inputs"in r&&r.inputs){let e=JSON.parse(r.inputs);return(0,a.jsxs)(A.g,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",pt:t?"0.5rem":"0.25rem",pb:"0",mb:t?"0.5rem":"0",children:[(0,a.jsx)(h.x,{fontWeight:"bold",fontSize:"lg",children:"Your inputs"}),t?(0,a.jsx)(D.U,{align:"stretch",width:"100%",spacing:"1.25rem",my:"0.5rem",flexWrap:"wrap",children:Object.entries(e).map(e=>{let[r,t]=e;return(0,a.jsxs)(S.xu,{children:[(0,a.jsx)(h.x,{fontSize:"sm",fontWeight:"medium",color:"gray.500",_dark:{color:"gray.400"},noOfLines:1,children:r}),(0,a.jsx)(h.x,{fontSize:"md",fontWeight:"semibold",color:"gray.700",_dark:{color:"gray.200"},wordBreak:"break-word",children:t||"-"})]},r)})}):(0,a.jsx)(E.r,{templateColumns:t?"repeat(1, 1fr)":"repeat(2, 1fr)",gap:4,children:Object.entries(e).map(e=>{let[r,t]=e;return(0,a.jsx)(K.P,{colSpan:1,children:(0,a.jsxs)(S.xu,{children:[(0,a.jsx)(h.x,{fontSize:"sm",fontWeight:"medium",color:"gray.500",_dark:{color:"gray.400"},children:r}),(0,a.jsx)(h.x,{fontSize:"md",fontWeight:"semibold",color:"gray.700",_dark:{color:"gray.200"},wordBreak:"break-word",children:t})]})},r)})})]})}return(0,a.jsxs)(d.k,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",pb:"0",mb:t?"0.5rem":"0",children:[(0,a.jsxs)(d.k,{gap:"1rem",mb:"0.5rem",align:"center",children:[(0,a.jsx)(h.x,{_dark:{textColor:"gray.400"},textColor:"gray.800",fontSize:"lg",children:"Prompt"}),(0,a.jsx)(M.h,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",onClick:w,icon:(0,a.jsx)(U.J,{as:j?O.HhX:O.Fqs,boxSize:"1rem"}),"aria-label":"Copy prompt"})]}),(0,a.jsx)(h.x,{fontSize:"lg",_dark:{textColor:"gray.200"},textColor:"gray.600",mb:"0.5rem",wordBreak:"break-word",children:k}),(0,a.jsxs)(x.z,{variant:"outline",size:"md",fontSize:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",onClick:v,children:[(0,a.jsx)(U.J,{as:F.dou}),(0,a.jsx)(h.x,{ml:"0.5rem",children:"Reuse prompt"})]})]})};var J=t(57219),W=t(73459);let L=e=>{let{isPrev:r,selectedAsset:t,assets:o,setSelectedAsset:i,isSkinny:s,fetchAssets:l}=e,n=()=>{let e=o.findIndex(e=>e.assetKey===t.assetKey);r?e=Math.max(0,e-1):(e=Math.min(o.length-1,e+1),l&&l(e)),i(o[e])};return s?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(x.z,{onClick:n,size:"md",colorScheme:"gray",_dark:{bg:"gray.700",_hover:{bg:"gray.600"}},bg:"gray.300",_hover:{bg:"gray.400"},height:"3.5rem",width:"2.25rem",pos:"absolute",left:r?"-3rem":"",right:r?"":"-3rem",top:"calc(50% - 1.75rem)",children:r?(0,a.jsx)(J.w,{boxSize:"1.5rem",color:"gray.600",_dark:{color:"gray.400"}}):(0,a.jsx)(W.X,{boxSize:"1.5rem",color:"gray.600",_dark:{color:"gray.400"}})})};var Z=t(67395),N=t(32883);let q=e=>{let{stationId:r}=e,t=r&&r!==Z.Ss,{data:o}=(0,n.ZP)(t?"/api/explore/getStation?uuid=".concat(r):null);if(!r)return null;let i=r===Z.Ss?"/explore":"/station/".concat(r),s=(null==o?void 0:o.coverArtUrl)||Z.hR;return(0,a.jsx)(N.r,{href:i,children:(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",px:"0.5rem",mr:"0.5rem",children:[(0,a.jsx)(u.E,{src:s,alt:"Station Image",borderRadius:"0.25rem",objectFit:"cover",maxH:"1.5rem",w:"1.5rem"}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Go to station"})]})})};var H=t(82915),B=t(1679),G=t(19754),V=t(82730),Y=t(11365),Q=t(50151),X=t(64325),$=t(55281),ee=t(34651);let er=e=>{let{asset:r,setJobInProgress:t,onModalClose:o,accountDetails:i}=e,[s,c]=(0,l.useState)(!1),[m,p]=(0,l.useState)(T.bA),{isOpen:g,onToggle:u,onClose:b}=(0,V.q)(),j=(null==i?void 0:i.planType)!=="none",f="".concat(null==i?void 0:i.customerId,"-stablevideo"),w=async()=>{let e;s||(c(!0),"stable_video"===r.assetType?e={type:H.O.UpscaleSv,sourceVideo:r.assetKey,sourceImage:r.imageKey,sourceUuid:r.imageUuid,thumbnailKey:r.thumbnailKey,motion:r.motion,width:r.width,height:r.height,posPrompt:r.prompt,seed:r.imageSeed,referenceUuid:r.referenceUuid,referenceKey:r.referenceKey,faceFeaturesKey:r.faceFeaturesKey,watermark:!1}:(e={type:H.O.UpscaleImage,seed:r.seed,posPrompt:r.prompt,height:r.height,width:r.width,sourceImage:r.assetKey,watermark:!1,stationId:"stationId"in r?r.stationId:void 0,creativity:m},"mode"in r&&"reference"===r.mode&&(e.referenceKey=r.referenceKey,e.referenceUuid=r.referenceUuid,e.faceFeaturesKey=r.faceFeaturesKey)),await fetch("/api/jobs/submitJob?projectId=".concat(f),{method:"POST",body:JSON.stringify(e)}),t(!0),(0,n.JG)("/api/jobs/listJobs?projectId=".concat(f)),c(!1),o())};return"upscaled"in r&&r.upscaled?(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",isDisabled:s,cursor:"default",border:"none",_hover:{bg:"transparent"},children:[(0,a.jsx)(U.J,{as:y.PcH,h:"1rem",w:"1rem"}),(0,a.jsx)(h.x,{ml:"0.25rem",fontSize:"md",children:"Upscaled"})]}):"stable_video"===r.assetType?(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",isDisabled:s,onClick:w,children:[(0,a.jsx)(y.PcH,{size:"1rem"}),(0,a.jsx)(h.x,{ml:"0.25rem",fontSize:"md",children:"Upscale"})]}):(0,a.jsxs)(Y.J,{isOpen:g,onClose:b,placement:"top",children:[(0,a.jsx)(Q.x,{children:(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:u,children:[(0,a.jsx)(y.PcH,{size:"1rem"}),(0,a.jsx)(h.x,{ml:"0.25rem",fontSize:"md",children:"Upscale"})]})}),(0,a.jsx)(X.y,{bg:"transparent",p:"0",m:"0",border:"none",w:"max-content",children:j?(0,a.jsxs)(d.k,{pos:"relative",borderRadius:"0.5rem",bg:"white",border:"1px solid",borderColor:"gray.800",_dark:{bg:"gray.700",borderColor:"whiteAlpha.300"},align:"center",justify:"center",h:"2rem",children:[(0,a.jsx)(h.x,{pos:"absolute",left:"50%",bottom:"2.5rem",w:"max-content",transform:"translateX(-50%)",fontSize:"15px",borderRadius:"0.5rem",border:"1px",background:"white",borderColor:"gray.700",_dark:{background:"gray.800"},zIndex:2,flexDir:"row",align:"center",opacity:"1",px:"0.5rem",py:"0.1rem",children:"Upscale creativity: ".concat(10*m)}),(0,a.jsx)(M.h,{h:"100%",m:"0rem",p:"0rem",variant:"ghost","aria-label":"Cancel",onClick:b,children:(0,a.jsx)(B.T,{boxSize:"1rem",color:"gray.400"})}),(0,a.jsxs)(z.iR,{min:T.FB,max:T.xP,step:.1,w:"11rem",cursor:"col-resize",value:m,onChange:e=>p(e),children:[(0,a.jsx)(z.Uj,{h:"1.1rem",children:(0,a.jsx)(z.Ms,{color:"primary"})}),(0,a.jsx)(z.gs,{w:"4px",h:"1.2rem",autoFocus:!1})]}),(0,a.jsx)(M.h,{h:"100%","aria-label":"Generate",m:"0rem",p:"0rem",variant:"ghost",onClick:w,isDisabled:s,children:(0,a.jsx)(G.n,{boxSize:"1rem",color:"green.300"})})]}):(0,a.jsxs)($.K,{pos:"relative",borderRadius:"0.5rem",bg:"white",border:"1px solid",borderColor:"gray.300",_dark:{bg:"gray.700",borderColor:"whiteAlpha.300"},align:"center",justify:"center",p:"1rem",h:"100%",children:[(0,a.jsx)(h.x,{fontSize:"14px",color:"gray.800",_dark:{color:"gray.300"},children:"Upgrade to upscale"}),(0,a.jsx)(N.r,{href:"/pricing",children:(0,a.jsx)(x.z,{variant:"solid",colorScheme:"primary",fontSize:"16px",borderRadius:"0.5rem",w:"100%",onClick:()=>{ee.ZP.capture("Upgrade clicked",{referrer:"Upscale image credits"})},children:"Upgrade"})})]})})]})},et=e=>{let{asset:r,onModalClose:t,deleteAsset:o}=e,{isOpen:i,onOpen:s,onClose:l}=(0,V.q)(),n=e=>{e.shiftKey?c():s()},c=()=>{o(),l(),t()},m="asset";return"turbo_image"===r.assetType?m="image":"stable_video"===r.assetType&&(m="video"),(0,a.jsxs)(Y.J,{placement:"bottom",isOpen:i,onClose:l,children:[(0,a.jsx)(Q.x,{children:(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",p:"0.75rem",mt:"0.5rem",onClick:e=>n(e),bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"red.500"},_dark:{bg:"gray.700",borderColor:"gray.600",_hover:{bg:"gray.600"}},children:[(0,a.jsx)(U.J,{as:y.Xm5,color:"red.500"}),(0,a.jsx)(h.x,{ml:"0.5rem",textColor:"red.500",fontSize:"md",children:"Delete"})]})}),(0,a.jsxs)(X.y,{_dark:{bg:"gray.900"},bg:"white",w:"100%",p:"1rem",maxW:"16rem",children:[(0,a.jsx)(h.x,{fontSize:"lg",textAlign:"center",textColor:"gray.800",_dark:{textColor:"gray.200"},children:"Delete ".concat(m)}),(0,a.jsx)(h.x,{fontSize:"md",textAlign:"center",textColor:"gray.600",_dark:{textColor:"gray.400"},mt:"0.5rem",children:"This is permanent and cannot be undone."}),(0,a.jsxs)(d.k,{w:"100%",mt:"1rem",align:"center",justify:"center",children:[(0,a.jsx)(x.z,{variant:"outline",colorScheme:"gray",size:"md",onClick:l,mx:"0.25rem",borderRadius:"0.5rem",_dark:{textColor:"gray.300",borderColor:"gray.600"},textColor:"gray.800",borderColor:"gray.300",fontSize:"md",children:"Cancel"}),(0,a.jsx)(x.z,{variant:"solid",colorScheme:"red",size:"md",onClick:c,mx:"0.25rem",borderRadius:"0.5rem",fontSize:"md",children:"Delete"})]})]})]})};var ea=t(71818);let eo=e=>{let{asset:r,isMobile:t}=e,[o,i]=(0,l.useState)(!1),s=async()=>{i(!0),ee.ZP.capture("Download asset",{location:"Preview modal"});try{let e=await fetch("".concat(r.assetUrl,"?t=").concat(Date.now())),t=await e.blob(),a=window.URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download="".concat(r.prompt||"image",".").concat(r.assetKey.split(".").pop()),document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>{window.URL.revokeObjectURL(a)},100)}catch(e){console.error("Download failed:",e)}i(!1)};return(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",isDisabled:o,onClick:s,children:[(0,a.jsx)(ea.yYs,{size:"1.1rem"}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Download"})]})},ei=e=>{let{asset:r,favoriteAsset:t}=e;return(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:t,children:[r.favorite?(0,a.jsx)(U.J,{as:y.$0H,color:"red"}):(0,a.jsx)(U.J,{as:y.BgW}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Favorite"})]})},es=e=>{let{asset:r,isMobile:t}=e,{isOpen:o,onOpen:i,onClose:s}=(0,V.q)(),l=()=>{ee.ZP.capture("Share link",{location:"Preview modal"});let e=window.location.origin,a="".concat(e,"/share/").concat(r.uuid),o=!1;if(t)try{navigator.share({title:"Decohere - ".concat(r.prompt||"Untitled"),url:a}),o=!0}catch(e){o=!1}o||(navigator.clipboard.writeText(a),i())},n="Share link to this ";return n="turbo_image"===r.assetType?"image":"video",(0,a.jsxs)(Y.J,{placement:"bottom",isOpen:o,onClose:s,children:[(0,a.jsx)(Q.x,{children:(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:l,children:[(0,a.jsx)(y.Lrt,{size:"1rem"}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Share"})]})}),(0,a.jsxs)(X.y,{bg:"gray.100",_dark:{bg:"gray.900"},w:"100%",p:"0.5rem",children:[(0,a.jsx)(h.x,{p:"0.5rem",px:"1rem",fontSize:"lg",textAlign:"center",_dark:{color:"gray.200"},color:"gray.800",children:"Share link copied to clipboard"}),(0,a.jsxs)(h.x,{color:"gray.600",maxW:"14rem",textAlign:"center",mb:"1rem",_dark:{color:"gray.400"},children:["Anyone with the link will be able to view and download this"," ",n]})]})]})},el=e=>{let{asset:r,setJobInProgress:t,onModalClose:o,accountDetails:i}=e,[s,c]=(0,l.useState)(!1),[m,p]=(0,l.useState)(75),{isOpen:g,onToggle:u,onClose:b}=(0,V.q)(),j=(null==i?void 0:i.planType)!=="none",f="".concat(null==i?void 0:i.customerId,"-stablevideo"),w=async()=>{if(s)return;c(!0);let e={type:H.O.StableVideo,watermark:!1,sourceImage:r.assetKey,sourceUuid:r.uuid,width:r.width,height:r.height,posPrompt:r.prompt,seed:r.seed,referenceUuid:"referenceUuid"in r?r.referenceUuid:void 0,referenceKey:"referenceKey"in r?r.referenceKey:void 0,faceFeaturesKey:"faceFeaturesKey"in r?r.faceFeaturesKey:void 0,motion:m};await fetch("/api/jobs/submitJob?projectId=".concat(f),{method:"POST",body:JSON.stringify(e)}),t(!0),(0,n.JG)("/api/jobs/listJobs?projectId=".concat(f)),c(!1),o()};return(0,a.jsxs)(Y.J,{isOpen:g,onClose:b,placement:"top",children:[(0,a.jsx)(Q.x,{children:(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:u,children:[(0,a.jsx)(y.KoQ,{size:"1rem"}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Make Video"})]})}),(0,a.jsx)(X.y,{bg:"transparent",p:"0",m:"0",border:"none",w:"max-content",children:j?(0,a.jsxs)(d.k,{pos:"relative",borderRadius:"0.5rem",bg:"white",border:"1px solid",borderColor:"gray.800",_dark:{bg:"gray.700",borderColor:"whiteAlpha.300"},align:"center",justify:"center",h:"2rem",children:[(0,a.jsx)(h.x,{pos:"absolute",left:"50%",bottom:"2.5rem",w:"max-content",transform:"translateX(-50%)",fontSize:"15px",borderRadius:"0.5rem",border:"1px",background:"white",borderColor:"gray.700",_dark:{background:"gray.800"},zIndex:2,flexDir:"row",align:"center",opacity:"1",px:"0.5rem",py:"0.1rem",children:"Video motion: ".concat((m/150*10).toFixed(1))}),(0,a.jsx)(M.h,{h:"100%",m:"0rem",p:"0rem",variant:"ghost","aria-label":"Cancel",onClick:b,children:(0,a.jsx)(B.T,{boxSize:"1rem",color:"gray.400"})}),(0,a.jsxs)(z.iR,{min:0,max:150,step:.01,w:"11rem",cursor:"col-resize",value:m,onChange:e=>p(e),children:[(0,a.jsx)(z.Uj,{h:"1.1rem",children:(0,a.jsx)(z.Ms,{color:"primary"})}),(0,a.jsx)(z.gs,{w:"4px",h:"1.2rem",autoFocus:!1})]}),(0,a.jsx)(M.h,{h:"100%","aria-label":"Generate",m:"0rem",p:"0rem",variant:"ghost",onClick:w,isDisabled:s,children:(0,a.jsx)(G.n,{boxSize:"1rem",color:"green.300"})})]}):(0,a.jsxs)($.K,{pos:"relative",borderRadius:"0.5rem",bg:"white",border:"1px solid",borderColor:"gray.300",_dark:{bg:"gray.700",borderColor:"whiteAlpha.300"},align:"center",justify:"center",p:"1rem",h:"100%",children:[(0,a.jsx)(h.x,{fontSize:"14px",color:"gray.800",_dark:{color:"gray.300"},children:"Upgrade to make video"}),(0,a.jsx)(N.r,{href:"/pricing",children:(0,a.jsx)(x.z,{variant:"solid",colorScheme:"primary",fontSize:"16px",borderRadius:"0.5rem",w:"100%",onClick:()=>{ee.ZP.capture("Upgrade clicked",{referrer:"Make video"})},children:"Upgrade"})})]})})]})},en=e=>{let{selectedAsset:r,favoriteAsset:t,deleteAsset:o,onModalClose:i,setJobInProgress:s,accountDetails:l,isMobile:n}=e;return(0,a.jsxs)(d.k,{flexDir:"row",flexWrap:"wrap",alignItems:"center",pl:"0.75rem",pr:"0.5rem",w:"100%",mb:"0.5rem",children:["edited"in r&&r.edited&&(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",cursor:"default",border:"none",_hover:{bg:"transparent"},children:[(0,a.jsx)(U.J,{as:O.zmo,h:"1.2rem",w:"1.2rem"}),(0,a.jsx)(h.x,{ml:"0.25rem",fontSize:"md",children:"Edited"})]}),(0,a.jsx)(er,{accountDetails:l,asset:r,onModalClose:i,setJobInProgress:s}),(0,a.jsx)(ei,{asset:r,favoriteAsset:()=>t(r)}),("turbo_image"===r.assetType||"import_image"===r.assetType)&&(0,a.jsx)(el,{asset:r,onModalClose:i,accountDetails:l,setJobInProgress:s}),(0,a.jsx)(eo,{asset:r,isMobile:n}),(0,a.jsx)(es,{asset:r,isMobile:n}),"stationId"in r&&(0,a.jsx)(S.xu,{mt:"0.5rem",children:(0,a.jsx)(q,{stationId:r.stationId})}),(0,a.jsx)(et,{asset:r,onModalClose:i,deleteAsset:()=>o(r)})]})},ed=e=>{let{asset:r,setGenerateMode:t,setUploadImage:o,onModalClose:i,reuseFocusRef:l,isMobile:n}=e,{asPath:c}=(0,s.useRouter)();(0,g.p)();let m=()=>{if("imageKey"in r&&c.includes("realtime")){if(t&&t("upload"),o&&o({key:r.imageKey,uuid:r.imageUuid,height:r.height,width:r.width}),l){var e,a;null===(e=l.current)||void 0===e||e.focus(),null===(a=l.current)||void 0===a||a.scrollIntoView()}i&&i()}};return"imageKey"in r?(0,a.jsxs)(d.k,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",children:[(0,a.jsx)(h.x,{_dark:{textColor:"gray.400"},textColor:"gray.800",fontSize:"lg",mb:"0.5rem",userSelect:"none",children:"Starting image"}),(0,a.jsx)(d.k,{pos:"relative",children:(0,a.jsx)(u.E,{src:r.thumbnailUrl,alt:"Image",borderRadius:"0.5rem",maxH:"8rem",mb:"0.5rem"})}),(0,a.jsx)(d.k,{flexDir:"row",alignItems:"center",gap:"0.5rem",children:c.includes("realtime")&&(0,a.jsxs)(x.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",onClick:m,children:[(0,a.jsx)(y.H3h,{}),(0,a.jsx)(h.x,{ml:"0.5rem",fontSize:"md",children:"Reuse image"})]})})]}):(0,a.jsx)(a.Fragment,{})};var ec=t(9681);let em=e=>{let{next:r,hasMore:t,assets:o,accountDetails:i,selectedAsset:s,setSelectedAsset:n,modalOpen:c,onModalClose:m,setJobInProgress:p,isMobile:g,favoriteAsset:u,deleteAsset:x,setPrompt:y,setSeed:z,setGenerateMode:T,setUploadImage:R,setOriginalSeed:A,setOriginalPrompt:D,setAspectRatio:E,reuseFocusRef:K}=e,{width:M,height:U}=(0,f.ZP)(),F=M<800||g,O=(0,l.useRef)(s),J=(null==s?void 0:s.submissionTime)?new Date(s.submissionTime).toLocaleString():"";async function W(e){e>=o.length-3&&t&&r&&await r()}(0,l.useEffect)(()=>{O.current=s},[s]),(0,l.useEffect)(()=>{if(!c)return;let e=e=>{if("ArrowLeft"===e.key){let e=o.findIndex(e=>{var r;return e.assetKey===(null===(r=O.current)||void 0===r?void 0:r.assetKey)});n(o[e=Math.max(0,e-1)])}else if("ArrowRight"===e.key){let e=o.findIndex(e=>{var r;return e.assetKey===(null===(r=O.current)||void 0===r?void 0:r.assetKey)});e=Math.min(o.length-1,e+1),n(o[e]),W(e)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,c]);let{displayWidth:Z}=(0,_.M)(M,U,(null==s?void 0:s.width)||0,(null==s?void 0:s.height)||0,g,F,!0);return s?(0,a.jsxs)(w.u_,{isOpen:c,onClose:m,isCentered:!0,allowPinchZoom:!0,children:[(0,a.jsx)(v.Z,{bg:"whiteAlpha.500",_dark:{bg:"blackAlpha.500"},backdropFilter:"blur(20px)"}),(0,a.jsxs)(k.h,{maxH:"90vh",w:F?"":"calc(".concat(Z,"px) + 16rem"),maxW:F?"100vw":"calc(100vw - 8rem)",border:"1px",borderColor:"gray.200",bg:"white",_dark:{borderColor:"gray.700",bg:"gray.800"},borderRadius:"0.5rem",containerProps:{zIndex:9999},children:[(0,a.jsx)(C.o,{border:0,cursor:"pointer",size:"lg",mt:"-0.25rem",mr:"-0.5rem",color:"gray.800",_focus:{boxShadow:"none"},_dark:{color:"gray.100"}}),(0,a.jsxs)(d.k,{p:F?"0.25rem":"1rem",flexDir:F?"column":"row",alignItems:"start",objectFit:"contain",borderRadius:"0.5rem",pt:F?"2rem":"1rem",bg:"white",_dark:{bg:"gray.800"},children:[(0,a.jsxs)(S.xu,{w:"100%",children:["templateId"in s&&(0,a.jsx)(S.xu,{mt:"0.5rem",mb:F?"0rem":"0.5rem",ml:F?"0.5rem":"0",children:(0,a.jsx)(ec.n,{templateId:s.templateId})}),(0,a.jsx)(_.Z,{asset:s,isMobile:g,isModal:!0})]}),(0,a.jsxs)(d.k,{flexDir:"column",alignItems:"start",w:F?"100%":"16rem",minW:"16rem",children:[F&&(0,a.jsx)(en,{accountDetails:i,deleteAsset:x,favoriteAsset:u,onModalClose:m,selectedAsset:s,setJobInProgress:p,isMobile:g}),(0,a.jsx)(P,{isSkinny:F,asset:s,setPrompt:y,setSeed:z,setGenerateMode:T,onModalClose:m,reuseFocusRef:K,setOriginalSeed:A,setOriginalPrompt:D,setAspectRatio:E}),(0,a.jsx)(ed,{asset:s,setGenerateMode:T,setUploadImage:R,onModalClose:m,reuseFocusRef:K,isMobile:g}),(0,a.jsx)(b,{asset:s,focusRef:K,setUploadImage:R,setMode:T,onClose:m}),"motion"in s&&(0,a.jsx)(j.Z,{motion:s.motion,setMotion:()=>{},selectable:!1}),"creativity"in s&&(0,a.jsx)(I,{asset:s}),!F&&(0,a.jsx)(en,{setJobInProgress:p,accountDetails:i,deleteAsset:x,favoriteAsset:u,onModalClose:m,selectedAsset:s,isMobile:g}),(0,a.jsxs)(h.x,{_dark:{textColor:"gray.400"},textColor:"gray.500",fontSize:"sm",mb:"0.5rem",mx:"0.75rem",fontWeight:500,children:["import_image"===s.assetType?"Uploaded on":"Created on"," ",J]})]}),(0,a.jsx)(L,{isPrev:!0,selectedAsset:s,assets:o,setSelectedAsset:n,isSkinny:F}),(0,a.jsx)(L,{isPrev:!1,selectedAsset:s,assets:o,setSelectedAsset:n,isSkinny:F,fetchAssets:W})]})]})]}):null};var ep=t(94421),eg=t(49638),eh=t(85424),eu=t(1121);let ex=e=>{let{projectId:r,assets:t,jobInProgress:o,setJobInProgress:i,dispatchAssets:d,assetFilterConfig:c,templateId:m}=e,p=(0,n.ZP)("/api/jobs/listJobs?projectId=".concat(r),{refreshInterval:o?3e3:0}).data,{asPath:g}=(0,s.useRouter)();if((0,l.useEffect)(()=>{if(!p)return;let e=(0,eg.J)(p,H.O.StableVideo,H.O.UpscaleImage,H.O.UpscaleSv,H.O.QualityImage,H.O.TemplateImage);if(e.length>0)i(!0);else{let e=setTimeout(()=>{i(!1)},6e3);return()=>clearTimeout(e)}},[p]),(0,l.useEffect)(()=>{let e=null,t=async()=>{let e=e3(g),t=await (0,eu.s)({projectId:r,lastEvaluatedKey:void 0,pageSize:e8,assetTypes:e});d({type:"ADD_DATA",payload:{data:t.items,prepend:!0}})};return o&&(t(),e=setInterval(t,3e3)),()=>{e&&clearInterval(e)}},[o,r]),!p)return null;let h=p.filter(e=>{let r=g.includes("/realtime"),t=!m||e.templateId===m;return!(e.templateId&&r)&&t}),u=h.filter(e=>!t.data.some(r=>r.submissionTime===e.submissionTime));return(0,a.jsx)(a.Fragment,{children:u.map(e=>(0,a.jsx)(eh.ZP,{imageSize:c.imageSize,imageAspectRatio:c.imageAspectRatio,job:e},"".concat(e.submissionTime,"-").concat(e.type,"-").concat(e.startTime)))})},ey=e=>{let{isMobile:r,assets:t,modifiedAssets:o,dispatchAssets:i,accountDetails:n,assetFilterConfig:g,jobInProgress:h,setPrompt:u,setSeed:x,setGenerateMode:y,setUploadImage:b,setOriginalSeed:j,setOriginalPrompt:f,setAspectRatio:w,reuseFocusRef:v,templateId:k}=e,C="".concat(null==n?void 0:n.customerId,"-stablevideo"),{asPath:S}=(0,s.useRouter)(),[_,z]=(0,l.useState)(void 0),T=t.data.length||0,[I,R]=(0,l.useState)(!1),{ref:A,inView:D}=(0,p.YD)({triggerOnce:!1,threshold:1}),E=e1[g.assetsFilterType];(0,l.useEffect)(()=>{void 0!==h&&R(h)},[h]),(0,l.useEffect)(()=>{D&&!t.loading&&t.key&&K(t.key,g.viewFavorites,1)},[D,t.loading,t.key]);let K=async(e,r,a)=>{if(e||i({type:"SET_KEY",payload:""}),t.loading||!e)return;i({type:"SET_LOADING",payload:!0});let o=e3(S),s=await (0,eu.s)({projectId:C,lastEvaluatedKey:e,pageSize:r?e8*Math.min(a,32):e8,assetTypes:o});i({type:"ADD_DATA",payload:{data:s.items,prepend:!1}}),i({type:"SET_KEY",payload:s.lastEvaluatedKey}),i({type:"SET_LOADING",payload:!1});let l=s.items.filter(e=>!!e.prompt.includes(g.searchQuery)&&e2(e,g.viewFavorites,"upscaled"===g.assetResolution,k,E));0==l.length&&await K(s.lastEvaluatedKey,!0,8*a)},M=async e=>{let r=e.favorite,a=[...t.data],o=t.data.find(r=>r.uuid===e.uuid);if(!o)return;o.favorite=!r,i({type:"SET_DATA",payload:[...t.data]}),_&&z({..._,favorite:!r});let s=await fetch("/api/assets/favoriteAsset?projectId=".concat(C),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetType:e.assetType,submissionTime:e.submissionTime,favorite:!r})});s.ok||i({type:"SET_DATA",payload:a})},U=async e=>{let r=[...t.data],a=[...t.data].filter(r=>r.assetKey!==e.assetKey);i({type:"SET_DATA",payload:a});let o=await fetch("/api/assets/deleteAsset?projectId=".concat(C),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetType:e.assetType,submissionTime:e.submissionTime})});o.ok||i({type:"SET_DATA",payload:r})},F=e=>{z(e)};return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)(m.Z,{dataLength:T,next:async()=>await K(t.key,g.viewFavorites,1),hasMore:!!t.key,scrollableTarget:"scrollableDiv",loader:(0,a.jsx)(d.k,{flexDir:"column",width:"100%",align:"center",children:(0,a.jsx)(d.k,{flexWrap:"wrap",justify:"center",children:(0,a.jsx)(c.$,{ref:A,size:"md",color:"gray.500",m:"20px"})})}),scrollThreshold:.8,children:(0,a.jsx)(d.k,{flexDir:"column",width:"100%",align:"center",children:(0,a.jsxs)(d.k,{flexWrap:"wrap",justify:"center",id:"asset-library",children:[(0,a.jsx)(ex,{templateId:k,jobInProgress:I,setJobInProgress:R,projectId:C,dispatchAssets:i,assets:t,assetFilterConfig:g}),o&&n&&o.map(e=>(0,a.jsx)(ep.r,{imageAspectRatio:g.imageAspectRatio,imageSize:g.imageSize,isMobile:r,asset:e,accountDetails:n,onSelect:()=>F(e),favoriteAsset:M,deleteAsset:U},"".concat(e.submissionTime,"-").concat(e.uuid)))]})})}),n&&(0,a.jsx)(em,{reuseFocusRef:v,setPrompt:u,setSeed:x,setGenerateMode:y,setUploadImage:b,setOriginalSeed:j,setOriginalPrompt:f,setAspectRatio:w,accountDetails:n,setJobInProgress:R,assets:o,selectedAsset:_,setSelectedAsset:z,modalOpen:!!_,onModalClose:()=>z(void 0),next:async()=>await K(t.key,g.viewFavorites,1),hasMore:!!t.key,isMobile:r,deleteAsset:U,favoriteAsset:M})]})};var eb=t(96854);let ej=e=>{let{assetFilterConfig:r,isTemplate:t,isMobile:o}=e;return t?null:(0,a.jsx)(l.Fragment,{children:(0,a.jsx)(d.k,{flexDir:"column",width:"100%",align:"center",pt:"66px",children:(0,a.jsx)(d.k,{flexDir:"row",flexWrap:"wrap",width:"100%",justify:"center",gap:"0.5rem",children:Array(e8).fill(1).map((e,t)=>(0,a.jsx)(eb.O,{borderRadius:"0.5rem",height:ep.x[r.imageSize][o?"mobile":"desktop"][r.imageAspectRatio].height,width:ep.x[r.imageSize][o?"mobile":"desktop"][r.imageAspectRatio].width},t))})})})},ef=e=>{let{assetFilterConfig:r}=e,t="No ".concat(e5[r.assetsFilterType]," found");return r.searchQuery.length>0&&(t+=' with prompt "'.concat(r.searchQuery,'"')),r.viewFavorites&&(t+=" in Favorites"),(0,a.jsx)(d.k,{height:"100%",width:"100%",align:"center",justify:"center",children:(0,a.jsx)(h.x,{wordBreak:"break-word",color:"gray.700",textAlign:"center",_dark:{color:"gray.200"},children:t})})};var ew=t(27239);let ev=()=>(0,a.jsxs)(ew.M,{flexDir:"column",height:"100%",width:"100%",gap:"1rem",children:[(0,a.jsx)(h.x,{color:"gray.800",_dark:{color:"gray.200"},children:"Log in to view your library"}),(0,a.jsxs)(x.z,{variant:"solid",borderRadius:"0.5rem",onClick:()=>{window.location.href="/api/auth/login"},textColor:"gray.200",h:"2rem",fontSize:"15px",children:["Log in",(0,a.jsx)(U.J,{as:y.IPB,height:"18px",width:"18px",color:"gray.200",display:"flex",alignItems:"center",ml:"0.5rem"})]})]});function ek(e,r){switch(r.type){case"SET_DATA":return{...e,data:r.payload};case"SET_LOADING":return{...e,loading:r.payload};case"SET_KEY":return{...e,key:r.payload};case"ADD_DATA":let t=r.payload.data.filter(r=>!e.data.some(e=>e.submissionTime===r.submissionTime));return{...e,data:r.payload.prepend?[...t,...e.data]:[...e.data,...t]};default:return e}}let eC=()=>{let[e,r]=(0,l.useReducer)(ek,{data:[],loading:!0,key:""});return{assets:e,dispatchAssets:r}};var eS=t(6147),e_=t(66712),ez=t(91170),eT=t(4040),eI=t(42311),eR=t(18689),eA=t(62658),eD=t(61121);let eE={all:(0,a.jsx)(U.J,{as:y.tdI,h:"18px",w:"18px"}),images:(0,a.jsx)(U.J,{as:y.H3h,h:"15px",w:"15px"}),videos:(0,a.jsx)(U.J,{as:ea.Uyb,h:"15px",w:"15px"}),uploads:(0,a.jsx)(U.J,{as:eD.d7P,h:"15px",w:"15px"})},eK={all:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(y.tdI,{size:"18px",color:"gray.200"}),(0,a.jsx)("span",{children:"All media"})]}),images:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(y.H3h,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Images"})]}),videos:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(ea.Uyb,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Videos"})]}),uploads:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(eD.d7P,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Uploads"})]})},eM={normal:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(y.tdI,{size:"18px",color:"gray.200"}),(0,a.jsx)("span",{children:"All media"})]}),upscaled:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(y.PcH,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Upscaled"})]})},eU=(0,l.forwardRef)((e,r)=>{let{isMobile:t,...o}=e;return(0,a.jsx)(x.z,{...o,ref:r,border:"1px",p:t?"8px":"1rem",pr:t?"2px":"1rem",height:"34px",borderRadius:"0.5rem",_hover:{borderColor:"gray.400",bgColor:"gray.200"},_active:{backgroundColor:"gray.200"},color:"black",bg:"gray.100",borderColor:"gray.300",_dark:{bg:"gray.800",color:"white",borderColor:"gray.700",_hover:{borderColor:"gray.600"},_active:{backgroundColor:"gray.800"}},width:t?"60px":"180px",minW:t?"60px":"180px",maxW:t?"60px":"180px"})});eU.displayName="AssetLibraryControlsMenuButton";let eF=e=>{let{assetsFilterType:r,setAssetsFilterType:t,isMobile:o,setViewFavorites:i,setAssetResolution:s,assetResolution:n}=e,[c,m]=(0,l.useState)("everything"),[p,g]=(0,l.useState)(!1),h=e=>{i("everything"!==e),m(e)},u=()=>g(!p);return(0,a.jsxs)(e_.v,{isOpen:p,onOpen:u,onClose:u,closeOnSelect:!1,children:[(0,a.jsx)(ez.j,{as:eU,isMobile:o,rightIcon:(0,a.jsx)(eS.v,{height:"18px",width:"18px",__css:{transition:"all 0.2s",transform:p?"rotate(180deg)":"rotate(0deg)"}}),children:o?eE[r]:eK[r]}),(0,a.jsxs)(eT.q,{mt:"0rem",bg:"gray.100",borderColor:"gray.300",_dark:{bg:"gray.800",borderColor:"gray.700"},zIndex:3,minW:"180px",children:[(0,a.jsxs)(eI._,{title:"Group",value:c,onChange:h,type:"radio",children:[(0,a.jsx)(eR.i,{value:"everything",children:(0,a.jsxs)(d.k,{align:"center",gap:"8px",color:"gray.800",_dark:{color:"gray.200"},children:[(0,a.jsx)(U.J,{as:O.khG,h:"16px",w:"16px"}),(0,a.jsx)("span",{children:"Everything"})]})}),(0,a.jsx)(eR.i,{value:"favorites",children:(0,a.jsxs)(d.k,{align:"center",gap:"8px",color:"gray.800",_dark:{color:"gray.200"},children:[(0,a.jsx)(U.J,{as:y.BgW,h:"15px",w:"15px"}),(0,a.jsx)("span",{children:"Favorites"})]})})]}),(0,a.jsx)(eA.R,{}),(0,a.jsx)(eI._,{title:"Type",value:r,onChange:e=>{t(e)},type:"radio",children:Object.keys(eK).map(e=>(0,a.jsx)(eR.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:eK[e]},e))}),(0,a.jsx)(eA.R,{}),(0,a.jsx)(eI._,{title:"Resolution",type:"radio",value:n,onChange:e=>{s(e)},children:Object.keys(eM).map(e=>(0,a.jsx)(eR.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:eM[e]},e))})]})]})};var eO=t(96486),eP=t(78633),eJ=t(4758);let eW=()=>(0,a.jsxs)("svg",{height:"15px",width:"15px",viewBox:"0 -10 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"56",height:"30",rx:"6",stroke:"currentColor",strokeWidth:"6"}),(0,a.jsx)("rect",{x:"12.5",y:"39.5",width:"37",height:"3",rx:"1.5",stroke:"currentColor",strokeWidth:"3"})]}),eL=()=>(0,a.jsxs)("svg",{height:"15px",width:"15px",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"13",y:"3",width:"30",height:"58",rx:"6",stroke:"currentColor",strokeWidth:"6"}),(0,a.jsx)("rect",{x:"15",y:"9",width:"6",height:"2",rx:"1",stroke:"currentColor",strokeWidth:"2"})]}),eZ=e=>{switch(e){case"9:16":return(0,a.jsx)(U.J,{as:eL});case"1:1":return(0,a.jsx)(U.J,{as:y.hGI});case"16:9":return(0,a.jsx)(U.J,{as:eW});default:return null}},eN={wide:"16:9",square:"1:1",tall:"9:16"},eq=e=>{let{isMobile:r,imageSize:t,setImageSize:o,imageAspectRatio:i,setImageAspectRatio:s}=e,[n,c]=(0,l.useState)(!1),m=e=>{localStorage.setItem("".concat(eJ.IQ,"-imageSize"),e),o(e)},p=e=>{localStorage.setItem("".concat(eJ.IQ,"-aspectRatio"),e),s(e)},g=()=>c(!n),h={small:e=>(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[r?(0,a.jsx)(U.J,{as:eP.lTV,h:"15px",w:"15px"}):(0,a.jsx)(U.J,{as:eP.qY1,h:"15px",w:"15px"}),e?(0,a.jsx)("span",{children:"Small"}):!r&&(0,a.jsx)("span",{children:"Small"})]}),medium:e=>(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(U.J,{as:eP.lTV,h:"15px",w:"15px"}),e?(0,a.jsx)("span",{children:"Medium"}):!r&&(0,a.jsx)("span",{children:"Medium"})]}),large:e=>(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[(0,a.jsx)(U.J,{as:y.u9M,h:"15px",w:"15px"}),e?(0,a.jsx)("span",{children:"Large"}):!r&&(0,a.jsx)("span",{children:"Large"})]})};return(0,a.jsxs)(e_.v,{isOpen:n,onOpen:g,onClose:g,closeOnSelect:!1,children:[(0,a.jsx)(ez.j,{as:eU,isMobile:r,rightIcon:(0,a.jsx)(eS.v,{height:"18px",width:"18px",__css:{transition:"all 0.2s",transform:n?"rotate(180deg)":"rotate(0deg)"}}),children:h[t](!1)}),(0,a.jsxs)(eT.q,{mt:"0rem",bg:"gray.100",borderColor:"gray.300",_dark:{bg:"gray.800",borderColor:"gray.700"},zIndex:3,minW:"180px",children:[(0,a.jsx)(eI._,{color:"gray.800",_dark:{color:"gray.200"},title:"Thumbnail size",value:t,onChange:m,type:"radio",children:Object.keys(h).map(e=>r&&"medium"==e?null:(0,a.jsx)(eR.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:h[e](!0)},e))}),(0,a.jsx)(eA.R,{}),(0,a.jsx)(eI._,{color:"gray.800",_dark:{color:"gray.200"},value:i,onChange:p,title:"Layout",type:"radio",children:Object.keys(eN).map(e=>(0,a.jsx)(eR.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:(0,a.jsxs)(d.k,{align:"center",gap:"8px",children:[eZ(eN[e]),(0,a.jsx)("span",{children:(0,eO.upperFirst)(e)})]})},e))})]})]})};var eH=t(7116),eB=t(82140),eG=t(33090),eV=t(32735);let eY=e=>{let{searchQuery:r,handleSearch:t,isMobile:o}=e,i=(0,l.useRef)(null);return(0,a.jsx)(d.k,{children:(0,a.jsxs)(eB.B,{children:[(0,a.jsx)(eG.I,{ref:i,value:r,border:"1px",borderRadius:"0.5rem",borderColor:"gray.300",bg:"gray.100",_dark:{bg:"gray.800",borderColor:"gray.700",_active:{backgroundColor:"gray.800",borderColor:"gray.700"},_selected:{borderColor:"gray.700"},_hover:{borderColor:"gray.700"},_focus:{borderColor:"gray.700"}},placeholder:"Search for media...",fontSize:o?"16px":"small",_active:{borderColor:"gray.400",bg:"gray."},_selected:{borderColor:"gray.400",bg:"gray.200"},_hover:{borderColor:"gray.400",bg:"gray.200"},_focus:{borderColor:"gray.400",bg:"gray.200"},w:o?"100%":"250px",minW:o?"100%":"250px",maxW:o?"100%":"250px",height:"34px",onChange:t,style:{transition:"all 0.5s"}}),(0,a.jsx)(eV.x,{children:(0,a.jsx)(M.h,{isRound:!0,"aria-label":"Clear search",variant:"unstyled",size:"sm",onClick:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.focus()},icon:(0,a.jsx)(eH.W,{color:"gray.800",_dark:{color:"gray.300"}})})})]})})},eQ=e=>{let{isMobile:r,assetFilterConfig:t,dispatchAssetFilterConfig:o,handleSearch:i}=e;return(0,a.jsx)(S.xu,{position:"sticky",top:0,zIndex:3,w:"100%",children:(0,a.jsxs)(d.k,{p:4,pl:r?"1rem":"26px",pr:r?"1rem":"26px",gap:"8px",justify:"space-between",flexDirection:r?"row-reverse":"row",bgColor:"white",_dark:{bgColor:"black"},maxW:"100vw",children:[(0,a.jsxs)(d.k,{gap:"8px",children:[(0,a.jsx)(eF,{isMobile:r,assetsFilterType:t.assetsFilterType,setAssetsFilterType:e=>o({type:"SET_ASSETS_FILTER_TYPE",payload:e}),setViewFavorites:e=>o({type:"SET_VIEW_FAVORITES",payload:e}),assetResolution:t.assetResolution,setAssetResolution:e=>o({type:"SET_ASSET_RESOLUTION",payload:e})}),(0,a.jsx)(eq,{imageSize:t.imageSize,setImageSize:e=>o({type:"SET_IMAGE_SIZE",payload:e}),isMobile:r,imageAspectRatio:t.imageAspectRatio,setImageAspectRatio:e=>o({type:"SET_IMAGE_ASPECT_RATIO",payload:e})})]}),(0,a.jsx)(eY,{searchQuery:t.searchQuery,handleSearch:i,isMobile:r})]})})},eX={assetsFilterType:"all",imageSize:"small",imageAspectRatio:"wide",searchQuery:"",viewFavorites:!1,assetResolution:"normal"};function e$(e,r){switch(r.type){case"SET_ASSETS_FILTER_TYPE":return{...e,assetsFilterType:r.payload};case"SET_IMAGE_SIZE":return{...e,imageSize:r.payload};case"SET_IMAGE_ASPECT_RATIO":return{...e,imageAspectRatio:r.payload};case"SET_SEARCH_QUERY":return{...e,searchQuery:r.payload};case"SET_VIEW_FAVORITES":return{...e,viewFavorites:r.payload};case"SET_ASSET_RESOLUTION":return{...e,assetResolution:r.payload};default:return e}}let e0=()=>{let[e,r]=(0,l.useReducer)(e$,eX);return{assetFilterConfig:e,dispatchAssetFilterConfig:r}},e1={all:"all",images:["turbo_image","quality_image","template_output"],videos:"stable_video",uploads:"import_image"},e5={all:"media",images:"image",videos:"video",uploads:"uploaded image"},e2=(e,r,t,a,o)=>{if(a)return"templateId"in e&&e.templateId===a;let i="all"===o||(Array.isArray(o)?o.includes(e.assetType):e.assetType===o);return r&&(i=i&&e.favorite),t&&(i=i&&"upscaled"in e&&e.upscaled),i},e3=e=>{let r=["stable_video","turbo_image","import_image"];return e.includes("/templates")?["template_output"]:e.includes("/library")?[...r,"template_output","quality_image"]:r},e8=24,e7=e=>{let{initAccountDetails:r,isMobile:t,jobInProgress:d,setPrompt:c,setSeed:m,setGenerateMode:p,setUploadImage:g,setOriginalSeed:h,setOriginalPrompt:u,setAspectRatio:x,reuseFocusRef:y,isTemplate:b,templateId:j}=e,{user:f}=(0,o.a)(),{asPath:w}=(0,s.useRouter)(),[v,k]=(0,l.useState)(r),{data:C}=(0,n.ZP)(f?"/api/accountDetails":null,{refreshInterval:6e4,revalidateOnMount:!0}),S="".concat(null==v?void 0:v.customerId,"-stablevideo");(0,l.useEffect)(()=>{C&&k(C)},[C]);let{assets:_,dispatchAssets:z}=eC(),{assetFilterConfig:T,dispatchAssetFilterConfig:I}=e0(),{data:R,onSearch:A}=(0,i.Rx)(_.data,"prompt"),D=e1[T.assetsFilterType],E=R.filter(e=>e2(e,T.viewFavorites,"upscaled"===T.assetResolution,j,D)),K=e=>{let r=e.target.value;A(r),I({type:"SET_SEARCH_QUERY",payload:r})};(0,l.useEffect)(()=>{let e=async()=>{let e=e3(w);z({type:"SET_LOADING",payload:!0});let r=await (0,eu.s)({projectId:S,lastEvaluatedKey:void 0,pageSize:e8,assetTypes:e});z({type:"SET_KEY",payload:r.lastEvaluatedKey}),z({type:"SET_DATA",payload:r.items}),z({type:"SET_LOADING",payload:!1})};r&&U&&e()},[d]);let M=_.loading&&0==_.data.length,U=!_.key&&0==E.length;return w.includes("/realtime")&&0==_.data.length?null:v?(0,a.jsx)(a.Fragment,{children:M?(0,a.jsx)(ej,{isMobile:t,isTemplate:b,assetFilterConfig:T}):(0,a.jsxs)(a.Fragment,{children:[!b&&(0,a.jsx)(eQ,{isMobile:t,assetFilterConfig:T,dispatchAssetFilterConfig:I,handleSearch:K}),!b&&U?(0,a.jsx)(ef,{assetFilterConfig:T}):(0,a.jsx)(ey,{reuseFocusRef:y,setPrompt:c,setSeed:m,setGenerateMode:p,setUploadImage:g,setOriginalSeed:h,setOriginalPrompt:u,setAspectRatio:x,jobInProgress:d,accountDetails:v,dispatchAssets:z,assets:_,modifiedAssets:E,assetFilterConfig:T,isMobile:t,templateId:j})]})}):(0,a.jsx)(ev,{})}},9681:function(e,r,t){t.d(r,{n:function(){return c}});var a=t(85893),o=JSON.parse('{"z":[{"id":"xrW5ID-spotlight-text-poster","name":"Spotlight Text Poster","thumbnailKey":"template/xrW5ID-spotlight-text-poster-2.webp"},{"id":"I6usom-valentines-card-drawing","name":"Valentine\'s Card Drawing","thumbnailKey":"template/I6usom-valentines-card-drawing-0.webp"},{"id":"9OvyYz-minimal-logo-with-drawing","name":"Minimal Logo with Drawing","thumbnailKey":"template/9OvyYz-minimal-logo-with-drawing-0.webp"},{"id":"8NkzMJ-aquarium-poster","name":"Aquarium Poster","thumbnailKey":"template/8NkzMJ-aquarium-poster-2.webp"},{"id":"iZnLUN-high-tech-logo","name":"High Tech Logo","thumbnailKey":"template/iZnLUN-high-tech-logo-0.webp"},{"id":"yBEvI8-vintage-car-movie-poster","name":"Vintage Car Movie Poster","thumbnailKey":"template/yBEvI8-vintage-car-movie-poster-4.webp"},{"id":"sKb8MY-watercolor-card","name":"Watercolor Card","thumbnailKey":"template/sKb8MY-watercolor-card-1.webp"},{"id":"JX7lw5-pastel-card","name":"Pastel Card","thumbnailKey":"template/JX7lw5-pastel-card-0.webp"},{"id":"Ljb0EI-fireworks-card","name":"Fireworks Card","thumbnailKey":"template/Ljb0EI-fireworks-card-3.webp"},{"id":"L5NDEI-bold-landscape-card","name":"Bold Landscape Card","thumbnailKey":"template/L5NDEI-bold-landscape-card-0.webp"},{"id":"68vsqd-social-post-headshot","name":"Social Post Headshot","thumbnailKey":"template/68vsqd-social-post-headshot-3.webp"},{"id":"XvDcF1-album-cover-oil-paint","name":"Album Cover Oil Paint","thumbnailKey":"template/XvDcF1-album-cover-oil-paint-1.webp"},{"id":"TiUEWy-vintage-sunset-album-cover","name":"Vintage Sunset Album Cover","thumbnailKey":"template/TiUEWy-vintage-sunset-album-cover-2.webp"},{"id":"OQMAl7-fantasy-novel-cover-art","name":"Fantasy Novel Cover Art","thumbnailKey":"template/OQMAl7-fantasy-novel-cover-art-2.webp"},{"id":"KvLp83-birthday-card","name":"Birthday Card","thumbnailKey":"template/KvLp83-birthday-card-0.webp"},{"id":"iAACHa-floral-ink-wedding-invitation","name":"Floral Ink Wedding Invitation","thumbnailKey":"template/iAACHa-floral-ink-wedding-invitation-0.webp"},{"id":"wrDmSD-graffiti-artwork-with-text","name":"Graffiti Artwork with Text","thumbnailKey":"template/wrDmSD-graffiti-artwork-with-text-3.webp"},{"id":"zXd5u3-tv-static-with-text","name":"TV Static with Text","thumbnailKey":"template/zXd5u3-tv-static-with-text-1.webp"},{"id":"fIb0YE-retro-text-poster","name":"Retro Text Poster","thumbnailKey":"template/fIb0YE-retro-text-poster-0.webp"},{"id":"U7vXZB-minimalist-christmas-card","name":"Minimalist Christmas Card","thumbnailKey":"template/U7vXZB-minimalist-christmas-card-0.webp"},{"id":"88Wryi-comic-book-pop-text","name":"Comic Book Pop Text","thumbnailKey":"template/88Wryi-comic-book-pop-text-3.webp"},{"id":"X20ovM-bold-sports-poster","name":"Bold Sports Poster","thumbnailKey":"template/X20ovM-bold-sports-poster-3.webp"},{"id":"WbxeFd-beach-party-poster","name":"Beach Party Poster","thumbnailKey":"template/WbxeFd-beach-party-poster-0.webp"},{"id":"uitcwI-3d-beachy-typography","name":"3D Beachy Typography","thumbnailKey":"template/uitcwI-3d-beachy-typography-0.webp"},{"id":"SSDM5p-3d-glassy-typography","name":"3D Glassy Typography","thumbnailKey":"template/SSDM5p-3d-glassy-typography-0.webp"},{"id":"coming-soon","name":"Product Photography","thumbnailKey":"template/product-photography-0.webp"},{"id":"coming-soon","name":"Lyric Music Video","thumbnailKey":"template/lyric-music-video-0.webp"},{"id":"characters","name":"Custom Character Model","thumbnailKey":"template/train-a-person-0.webp"},{"id":"gfdUvv-vintage-wallpaper","name":"Vintage Wallpaper","thumbnailKey":"template/gfdUvv-vintage-wallpaper-0.webp"},{"id":"dgU8Wv-abstract-art-poster","name":"Abstract Art Poster","thumbnailKey":"template/dgU8Wv-abstract-art-poster-4.webp"},{"id":"OhMsuD-thank-you-card","name":"Thank You Card","thumbnailKey":"template/OhMsuD-thank-you-card-0.webp"},{"id":"KCyZRS-comic-punk-speech-bubble","name":"Comic Punk Speech Bubble","thumbnailKey":"template/KCyZRS-comic-punk-speech-bubble-0.webp"},{"id":"CBlulQ-3d-minimalist-logo","name":"3D Minimalist Logo","thumbnailKey":"template/CBlulQ-3d-minimalist-logo-0.webp"},{"id":"pxnadr-tribal-logo","name":"Tribal Logo","thumbnailKey":"template/pxnadr-tribal-logo-0.webp"},{"id":"Gr2lnq-adventure-logo","name":"Adventure Logo","thumbnailKey":"template/Gr2lnq-adventure-logo-0.webp"},{"id":"5RepcA-rainy-city-album-cover","name":"Rainy City Album Cover","thumbnailKey":"template/5RepcA-rainy-city-album-cover-0.webp"},{"id":"jtpwbM-metal-album-cover","name":"Metal Album Cover","thumbnailKey":"template/jtpwbM-metal-album-cover-0.webp"}]}'),i=t(93717),s=t(71293),l=t(32883),n=t(36948),d=t(19042);let c=e=>{let{templateId:r}=e;if(!r)return null;let t=o.z.find(e=>e.id===r);return t?(0,a.jsxs)(i.k,{gap:"0.25rem",flexWrap:"wrap",children:[(0,a.jsx)(s.x,{fontSize:"xl",fontWeight:"bold",children:"Made with"}),(0,a.jsx)(l.r,{href:"/templates/".concat(r),children:(0,a.jsxs)(i.k,{align:"center",children:[(0,a.jsx)(n.J,{as:d.ebg,color:"blue.500",boxSize:"1.25rem"}),(0,a.jsx)(s.x,{fontSize:"xl",fontWeight:"bold",color:"blue.500",children:t.name})]})})]}):null}},70114:function(e,r,t){var a=t(85893),o=t(93717),i=t(71293),s=t(50357),l=t(11163);let n=e=>{let{motion:r,setMotion:t,selectable:n}=e,d="primary",{asPath:c}=(0,l.useRouter)();return(0,a.jsxs)(o.k,{flexDir:"column",align:"center",justify:"center",w:"min-content",h:"min-content",ml:c.includes("/share")?"0rem":"0.5rem",children:[!n&&(0,a.jsx)(i.x,{textColor:"gray.800",_dark:{textColor:"gray.300"},fontSize:"md",mb:"0.75rem",userSelect:"none",w:"100%",textAlign:"center",children:"Video motion: ".concat((r/150*10).toFixed(1))}),(0,a.jsxs)(s.iR,{min:0,max:150,step:5,w:"10rem",value:r,onChange:function(e){n&&t(e)},colorScheme:d,cursor:n?"col-resize":"default",mb:n?"0rem":"1.5rem",children:[(0,a.jsx)(s.Uj,{h:"1.1rem",children:(0,a.jsx)(s.Ms,{color:d})}),n&&(0,a.jsx)(s.gs,{w:"4px",h:"1.2rem",opacity:n?"1":"0",autoFocus:!1})]}),n&&(0,a.jsx)(o.k,{flexDir:"row",align:"center",justify:"center",w:"100%",children:(0,a.jsx)(i.x,{color:"gray.400",fontSize:"14px",mt:n?"0rem":"0.5rem",children:"".concat((r/150*10).toFixed(1))})})]})};r.Z=n},49638:function(e,r,t){function a(e,r,t){if(!e||0===e.length)return!1;for(let a of e)if(a.type===r||t&&a.type===t)return!0;return!1}function o(e,r,t,a,o,i){if(!e||0===e.length)return[];let s=[];for(let l of e)l.type===r&&s.push(l),t&&l.type===t&&s.push(l),a&&l.type===a&&s.push(l),o&&l.type===o&&s.push(l),i&&l.type===i&&s.push(l);return s}t.d(r,{H:function(){return a},J:function(){return o}})},18094:function(e,r,t){t.d(r,{Rx:function(){return i}}),t(45689),t(7423);var a=t(96486),o=t(67294);let i=(e,r)=>{let[t,i]=(0,o.useState)(),s=(0,o.useCallback)(()=>(0,a.filter)(e,e=>{let o=(0,a.lowerCase)(JSON.stringify(r?e[r]:e));return(null==o?void 0:o.indexOf((0,a.lowerCase)(t)))>-1}),[e,t,r]),l=e=>{i(e.toLowerCase())};return{data:s(),onSearch:l}}}}]);
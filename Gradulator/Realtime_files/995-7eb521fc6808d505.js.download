"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{4010:function(e,r,t){t.d(r,{P6:function(){return u},Rx:function(){return g},t_:function(){return p}});var o=t(85893),a=t(36948),i=t(57747),n=t(93108),l=t(93717),s=t(22757),c=t(71293),d=t(67294),m=t(4758);function g(e,r){return 896===e?"".concat(m.hb,"/public/aspectRatio/16x9Frame.webp"):768===e?"".concat(m.hb,"/public/aspectRatio/4x3Frame.webp"):512===e&&512===r?"".concat(m.hb,"/public/aspectRatio/1x1Frame.webp"):576===e?"".concat(m.hb,"/public/aspectRatio/3x4Frame.webp"):896===r?"".concat(m.hb,"/public/aspectRatio/9x16Frame.webp"):void 0}function p(e){switch(e){case"9:16":return[512,896];case"3:4":return[576,768];case"1:1":default:return[512,512];case"4:3":return[768,576];case"16:9":return[896,512]}}function u(e){switch(e){case"9:16":return(0,o.jsxs)("svg",{viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{x:"3",y:"3",width:"30",height:"58",rx:"6",stroke:"currentColor",strokeWidth:"6"}),(0,o.jsx)("rect",{x:"15",y:"9",width:"6",height:"2",rx:"1",stroke:"currentColor",strokeWidth:"2"})]});case"1:1":return(0,o.jsx)("svg",{viewBox:"0 -15 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("rect",{x:"3",y:"3",width:"30",height:"30",rx:"6",stroke:"currentColor",strokeWidth:"6"})});case"16:9":return(0,o.jsxs)("svg",{viewBox:"0 -16 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{x:"3",y:"3",width:"56",height:"30",rx:"6",stroke:"currentColor",strokeWidth:"6"}),(0,o.jsx)("rect",{x:"12.5",y:"39.5",width:"37",height:"3",rx:"1.5",stroke:"currentColor",strokeWidth:"3"})]});default:return null}}let h=e=>{let{ratio:r,handleClick:t,isSelected:m}=e,[g,p]=(0,d.useState)(!1),h=function(e){switch(e){case"9:16":return(0,o.jsx)(a.J,{mt:"0.5rem",ml:"2.6rem",width:"96px",height:"96px",children:u(e)});case"1:1":return(0,o.jsx)(a.J,{mt:"1rem",mb:"-0.5rem",marginLeft:"2.75rem",width:"96px",height:"96px",children:u(e)});case"16:9":return(0,o.jsx)(a.J,{mt:"0.75rem",mb:"-0.5rem",ml:"0.3rem",width:"96px",height:"96px",children:u(e)});default:return null}}(r),x=function(e){switch(e){case"9:16":return"TikTok, Reels, Shorts";case"1:1":return"Instagram post";case"16:9":return"Youtube, Vimeo";default:return"-"}}(r),y=r.charAt(0).toUpperCase()+r.slice(1),f="transparent",b="transparent";return m?(f="whiteAlpha.900",b="blackAlpha.800"):g&&(f="primary.500",b="primary.500"),(0,o.jsx)(i.xu,{position:"relative",cursor:"pointer",children:(0,o.jsx)(n.z,{width:"150px",height:"180px",border:"4px",variant:"outline",borderRadius:"0.5rem",onClick:()=>t(r),borderColor:b,_dark:{borderColor:f},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:(0,o.jsxs)(l.k,{flexDir:"column",children:[h,(0,o.jsx)(s.X,{paddingTop:"1rem",color:"gray.700",_dark:{color:"gray.100"},size:"md",children:y}),(0,o.jsx)(c.x,{color:"gray.500",_dark:{color:"gray.400"},mt:"0.5rem",fontSize:"md",children:x})]})})})},x=e=>{let{aspectRatio:r,setAspectRatio:t,userData:a}=e;return null===a?(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.x,{fontSize:"20px",pt:"2rem",children:"Choose aspect ratio"}),(0,o.jsxs)(l.k,{flexDir:"row",alignItems:"center",width:"32rem",maxW:"100%",py:"1rem",justifyContent:"space-between",children:[(0,o.jsx)(h,{ratio:"9:16",handleClick:()=>t("9:16"),isSelected:"9:16"===r}),(0,o.jsx)(h,{ratio:"1:1",handleClick:()=>t("1:1"),isSelected:"1:1"===r}),(0,o.jsx)(h,{ratio:"16:9",handleClick:()=>t("16:9"),isSelected:"16:9"===r})]})]})};r.ZP=x},20995:function(e,r,t){t.d(r,{Z:function(){return eW}});var o=t(85893),a=t(93717),i=t(65028),n=t(67294),l=t(75081),s=t(36948),c=t(71293),d=t(82730),m=t(11365),g=t(50151),p=t(93108),u=t(64325),h=t(6147),x=t(4010);function y(e){let r=(0,x.P6)("16:9");return"tall"===e?r=(0,x.P6)("9:16"):"square"===e&&(r=(0,x.P6)("1:1")),(0,o.jsx)(s.J,{w:"28px",h:"28px",ml:"wide"!==e?"0.4rem":"0rem",mr:"wide"!==e?"-0.4rem":"0rem",mb:"wide"===e?"0.2rem":"0rem",mt:"wide"===e?"-0.2rem":"0rem",children:r})}let f=e=>{let r,{aspectRatio:t,onClick:i}=e,n=t.charAt(0).toUpperCase()+t.slice(1),l=(r="16:9","tall"===t?r="9:16":"square"===t&&(r="1:1"),r);"wide"===t&&(l="".concat(l," - YouTube, Vimeo, etc")),"tall"===t?l="".concat(l," - TikTok, Reels, etc"):"square"===t&&(l="".concat(l," - Instagram, Facebook, etc"));let s=y(t);return(0,o.jsxs)(a.k,{flexDir:"row",align:"center",w:"100%",py:"0.5rem",px:"1rem",color:"gray.800",_hover:{bg:"gray.200"},_dark:{color:"gray.100",_hover:{bg:"gray.600"}},cursor:"pointer",onClick:i,children:[s,(0,o.jsxs)(a.k,{flexDir:"column",align:"start",ml:"1rem",children:[(0,o.jsx)(c.x,{fontSize:"lg",mb:"-0rem",color:"gray.800",_dark:{color:"gray.200"},children:n}),(0,o.jsx)(c.x,{fontSize:"sm",color:"gray.700",_dark:{color:"gray.300"},children:l})]})]})},b=e=>{let{aspectRatio:r,setAspectRatio:t,disabled:i}=e,n=y(r),{isOpen:l,onToggle:s,onClose:x}=(0,d.q)(),b=r.charAt(0).toUpperCase()+r.slice(1);return(0,o.jsxs)(m.J,{placement:"top",isOpen:l,onClose:x,id:"options-button",children:[(0,o.jsx)(g.x,{children:(0,o.jsxs)(p.z,{"aria-label":"Aspect ratio",variant:"ghost",colorScheme:"gray",flexDir:"row",w:"6.5rem",h:"2.25rem",border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},isDisabled:i,pointerEvents:l?"none":"auto",my:"0.25rem",onClick:()=>{i||s()},children:[n,(0,o.jsxs)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.25rem",children:[(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:b}),(0,o.jsx)(h.v,{color:"gray.800",_dark:{color:"gray.200"}})]})]})}),(0,o.jsxs)(u.y,{bg:"gray.100",_dark:{bg:"gray.800"},boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.5)",w:"22rem",children:[(0,o.jsx)(f,{aspectRatio:"wide",onClick:()=>{t("wide"),x()}}),(0,o.jsx)(f,{aspectRatio:"square",onClick:()=>{t("square"),x()}}),(0,o.jsx)(f,{aspectRatio:"tall",onClick:()=>{t("tall"),x()}})]})]})};var w=t(34292),j=t(57747),k=t(64399);let v=e=>{let{lastGuidedPrompt:r,disableButtons:t,handleClearPrompt:n}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(p.z,{display:"flex",variant:"ghost",colorScheme:"gray",flexDir:"row",h:{base:"2rem",md:"2.25rem"},border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},cursor:"pointer",pointerEvents:"auto",isDisabled:t,my:"0.25rem",onClick:n,children:[(0,o.jsx)(s.J,{as:k.Z4w,h:{base:"1.25rem",md:"1.5rem"},w:{base:"1.25rem",md:"1.5rem"},color:"gray.800",_dark:{color:"gray.200"}}),(0,o.jsx)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.25rem",children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:"Clear prompt"})})]}),(0,o.jsx)(i.L,{}),(0,o.jsx)(w.U,{h:{base:"2rem",md:"2.25rem"},alignItems:"center",justify:"center",gap:{base:"0.25rem",md:"0.5rem"},my:"0.25rem",children:r.length>0&&(0,o.jsx)(w.U,{h:{base:"2rem",md:"2.25rem"},alignItems:"center",justify:"center",gap:{base:"0.25rem",md:"0.5rem"},my:"0.25rem",children:(0,o.jsx)(j.xu,{p:"0.25rem",px:{base:"0.25rem",md:"0.5rem"},bg:"gray.100",borderRadius:"lg",boxShadow:"sm",_dark:{bg:"gray.700"},flex:"1",maxW:{base:"120px",md:"350px"},overflow:"hidden",children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},isTruncated:!0,children:r})})})})]})};var S=t(7963),C=t(30080),_=t(34651);let R=e=>{let{prompt:r,setPrompt:t,generatingPrompt:i,setGeneratingPrompt:l,disableButtons:d}=e,m=(0,n.useRef)(r),g=i||r.length<5||r.length>300,u=(0,S.p)();async function h(){if(g)return;_.ZP.capture("Improve prompt");let e=new AbortController,r=setTimeout(()=>e.abort(),7500);try{l(!0);let o=await fetch("/api/prompt/getNewPrompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:m.current,mode:"expand"}),signal:e.signal});if(clearTimeout(r),o.ok){let e=await o.json();t(e.prompt)}else throw Error("Failed to fetch LLM response")}catch(e){u({title:"Error",description:"Something went wrong. Please try again.",status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{l(!1)}}return(0,n.useEffect)(()=>{m.current=r},[r]),(0,o.jsxs)(p.z,{variant:"ghost",colorScheme:"gray",flexDir:"row",h:"2.25rem",border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},cursor:"pointer",pointerEvents:g?"none":"auto",isDisabled:d,my:"0.25rem",onClick:()=>{h()},display:g?"none":"flex",children:[(0,o.jsx)(s.J,{as:C.Gd0,h:"1.5rem",w:"1.5rem",color:"gray.800",_dark:{color:"gray.200"}}),(0,o.jsx)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.25rem",children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:"Improve prompt"})})]})};var D=t(1679),P=t(5460),z=t(89993);let I=e=>{let{guidedMode:r,uploadImage:t,generateMode:a,setControlBarMode:i,maskedCanvas:n,setMaskedCanvas:l,setGenerateMode:s,setPrompt:c,setSeed:d,originalPrompt:m,originalSeed:g}=e;return null===n?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P.E,{src:n,alt:"Reference Image",position:"absolute",right:"0.5rem",top:r?"3rem":"0.6rem",maxH:"5.5rem",maxW:"6.9rem",borderRadius:"0.5rem",zIndex:1,display:"edit"===a?"block":"none",pointerEvents:"edit"===a?"auto":"none"}),(0,o.jsx)(z.h,{icon:(0,o.jsx)(D.T,{color:"white",boxSize:"0.5rem"}),"aria-label":"close",pos:"absolute",minW:"1.25rem",w:"1.25rem",h:"1.25rem",right:"0.5rem",top:r?"3rem":"0.6rem",variant:"ghost",bg:"grayAlpha.100",_hover:{bg:"gray.800"},onClick:function(){t?s("reference"):s("turbo"),i("default"),l(null),c(m),d(g)},zIndex:1,display:"edit"===a?"block":"none",pointerEvents:"edit"===a?"auto":"none"})]})};var E=t(32883),T=t(1702),U=t(86204),F=t(11163);let M=e=>{let{isOn:r,setIsOn:t}=e;return(0,o.jsxs)(a.k,{flexDir:"row",w:"6rem",ml:"1.8rem",children:[(0,o.jsx)(p.z,{variant:r?"outline":"solid",onClick:()=>t(!1),colorScheme:r?"gray":"primary",borderRadius:"0.5rem",children:"Off"}),(0,o.jsx)(i.L,{}),(0,o.jsx)(p.z,{variant:r?"solid":"outline",onClick:()=>t(!0),colorScheme:r?"primary":"gray",borderRadius:"0.5rem",children:"On"})]})},O=()=>{let e=(0,F.useRouter)(),r=window.location.href;async function t(){await e.push({pathname:"/api/auth/login",query:{returnTo:r}})}return(0,o.jsx)(p.z,{ml:"0.75rem",variant:"solid",borderRadius:"0.5rem",onClick:t,textColor:"gray.200",h:"2rem",children:"Login"})},J=e=>{let{referrer:r}=e;return(0,o.jsx)(E.r,{href:"/pricing",children:(0,o.jsx)(p.z,{ml:"0.75rem",variant:"solid",borderRadius:"0.5rem",onClick:()=>{_.ZP.capture("Upgrade clicked",{referrer:r})},textColor:"gray.200",h:"2rem",children:"Upgrade"})})},L=e=>{let{accountDetails:r,watermark:t,setWatermark:i}=e,n=!r||"none"===r.planType,l="Watermark";return n&&(l="Remove Watermark"),(0,o.jsxs)(a.k,{flexDir:"row",align:"center",w:"100%",py:"0.5rem",px:"1rem",children:[(0,o.jsx)(a.k,{flexDir:"column",align:"start",children:(0,o.jsx)(c.x,{fontSize:"15px",mr:"0.95rem",children:l})}),n&&r&&(0,o.jsx)(J,{referrer:"Remove watermark"}),n&&!r&&(0,o.jsx)(O,{}),!n&&(0,o.jsx)(M,{isOn:t,setIsOn:i})]})},W=e=>{let{accountDetails:r,safetyFilter:t,setSafetyFilter:i}=e,n=!r||"none"===r.planType||"explorer"===r.planType,l="Safety Filter";return n&&(l="Remove Safety Filter"),(0,o.jsxs)(a.k,{flexDir:"row",align:"center",w:"100%",py:"0.5rem",px:"1rem",children:[(0,o.jsx)(a.k,{flexDir:"column",align:"start",children:(0,o.jsx)(c.x,{fontSize:"15px",mr:"0.5rem",children:l})}),n&&r&&(0,o.jsx)(J,{referrer:"Safety filter"}),n&&!r&&(0,o.jsx)(O,{}),!n&&(0,o.jsx)(M,{isOn:t,setIsOn:i})]})},N=e=>{let{accountDetails:r,watermark:t,setWatermark:i,safetyFilter:n,setSafetyFilter:l}=e,{isOpen:h,onToggle:x,onClose:y}=(0,d.q)();return(0,o.jsxs)(m.J,{isOpen:h,onClose:y,id:"options-button",children:[(0,o.jsx)(g.x,{children:(0,o.jsxs)(p.z,{"aria-label":"Options",variant:"ghost",colorScheme:"gray",h:"2.25rem",borderRadius:"0.5rem",cursor:"pointer",pointerEvents:h?"none":"auto",my:"0.25rem",onClick:x,children:[(0,o.jsx)(s.J,{as:U.mdD,h:"1rem",w:"1rem",color:"gray.700",_dark:{color:"gray.300"}}),(0,o.jsx)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.5rem",children:(0,o.jsx)(c.x,{fontSize:"13px",userSelect:"none",color:"gray.700",_dark:{color:"gray.300"},children:"Options"})})]})}),(0,o.jsx)(T.h,{children:(0,o.jsxs)(u.y,{bg:"gray.100",_dark:{bg:"gray.800"},boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.5)",w:"16rem",py:"0.25rem",zIndex:200,children:[(0,o.jsx)(L,{accountDetails:r,watermark:t,setWatermark:i}),(0,o.jsx)(W,{accountDetails:r,safetyFilter:n,setSafetyFilter:l})]})})]})};var A=t(56714),Z=t(57169),G=t(96486),K=t(71818),H=t(18318);let q=e=>{let{guidedPrompt:r,setGuidedPrompt:t,prompt:i,setPrompt:c,mode:d,promptInputRef:m,promptAreaRef:g,disabled:p,generatingPrompt:u,guidedMode:h,setToolbarMode:x,setSuggestions:y,setSuggestionPrompt:f,setHighlightedText:b,setLastGuidedPrompt:w,setShouldSuggestPrompt:j}=e,[k,v]=(0,n.useState)(!1),[C,R]=(0,n.useState)(1),D=(0,S.p)(),{steps:P,nextStep:I,currentStep:E,isTourInProgress:T}=(0,l.r)(),U=e=>{let r=e.target.rows;e.target.rows=1;let t=Math.floor(e.target.scrollHeight/24);t===r&&(e.target.rows=t),t>=8&&(e.target.rows=8),R(t<8?t:8)};(0,A.O)({ref:g,handler:()=>{x("default")}}),(0,n.useEffect)(()=>(m&&m.current&&m.current.addEventListener("selectionchange",O),()=>{m&&m.current&&m.current.removeEventListener("selectionchange",O)}),[null==m?void 0:m.current]);let F=async()=>{if(0===r.length)return;v(!0),_.ZP.capture("Guided prompt");let e=await fetch("/api/prompt/getNewPrompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:0===i.length?"freeform":"freeformEdit",instructions:r,prompt:i})});if(e.ok){let o=await e.json();c(o.prompt),w(r),t("")}else D({title:"Error",description:"Something went wrong. Try again later.",status:"error",duration:5e3,isClosable:!0,icon:(0,o.jsx)(s.J,{as:K.wk9,h:"1.25rem",w:"1.25rem"})});T&&setTimeout(()=>{I()},P[E].delay||0),v(!1)},M=async()=>{if(!h&&m&&m.current){let{selectionStart:e,selectionEnd:r}=m.current,t=i.substring(e,r);if(t.length>0&&document.activeElement===m.current){let o=t.trim();if(0===o.length||o.length<3)return;f(i.slice(0,e)+"$(suggestion)"+i.slice(r)),x("suggestion"),b(t),j(!1)}else document.activeElement===m.current&&(x("default"),y([]),j(!1))}},O=(0,G.debounce)(M,300),J=e=>{p||(h?t(e.target.value):c(e.target.value))},L=async e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||(e.preventDefault(),h&&await F())};return(0,o.jsxs)(a.k,{bg:"gray.100",height:"auto",minHeight:"9rem",width:"40rem",overflow:"auto",borderRadius:"0.5rem",fontFamily:"monospace",color:"gray.800",border:"1px solid",borderColor:"gray.300",cursor:p?"not-allowed":"auto",pointerEvents:p?"none":"auto",_dark:{bg:"gray.800",borderColor:"gray.700",textColor:"gray.100"},p:"0",gap:"0.5rem",children:[(0,o.jsx)(Z.g,{ref:m,height:"100%",minHeight:"9rem",rows:C,maxLength:1500,resize:"none",overflow:"auto",placeholder:h?"Examples: 'a cat floating in space', 'make it a dog', 'give him a blue hat'":"edit"===d?"Describe what should be in the selected area":"Write your prompt and see changes in real-time",isDisabled:u,value:h?r:i,onChange:J,onInput:U,onSelect:O,onKeyDown:L,bg:"transparent",textColor:"inherit",_focus:{border:"none"},_focusVisible:{border:"none",boxShadow:"none"},border:"none",borderColor:"transparent",boxShadow:"none",fontSize:"16px",className:"prompt-input",pr:"turbo"===d?"1rem":"6rem"}),h&&(0,o.jsx)(z.h,{mt:"0.5rem",mr:"0.5rem","aria-label":"Submit",icon:(0,o.jsx)(s.J,{as:H.yhK,h:"1.25rem",w:"1.25rem"}),isDisabled:0===r.length,variant:"solid",colorScheme:"primary",size:"lg",isLoading:k,onClick:F,className:"guided-mode-submit-button"})]})};var B=t(43742),V=t(66712),$=t(91170),Y=t(4040),X=t(74970),Q=t(33082);let ee=e=>{let{guidedMode:r,setGuidedMode:t,accountDetails:i}=e,{isTourInProgress:n,handleTourBegin:d,hasClaimedReward:m,setHasClaimedReward:g}=(0,l.r)(),{showModal:u}=(0,B.d)(Q.D,{handleTourBegin:d});return n||m||(null==i?void 0:i.guidedTourRewardClaimed)||null==i||!i.customerId||(null==i?void 0:i.customerId)===""?(0,o.jsxs)(V.v,{placement:"top",closeOnBlur:!n,children:[(0,o.jsx)($.j,{as:p.z,"aria-label":"Prompt mode",variant:"ghost",colorScheme:"gray",flexDir:"row",h:"2.25rem",w:"8rem",border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},my:"0.25rem",className:"prompt-mode-button",children:(0,o.jsxs)(a.k,{flexDir:"row",align:"center",justify:"center",children:[(0,o.jsx)(s.J,{as:C.C3G,h:"1.5rem",w:"1.5rem",mr:"0.25rem"}),(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:r?"Guided":"Real-time"}),(0,o.jsx)(h.v,{color:"gray.800",_dark:{color:"gray.200"}})]})}),(0,o.jsxs)(Y.q,{bg:"gray.100",_dark:{bg:"gray.800"},boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.5)",zIndex:"4",m:"0",p:"0",w:"21rem",children:[(0,o.jsx)(X.s,{color:"gray.800",_hover:{bg:"gray.200"},_dark:{color:"gray.100",_hover:{bg:"gray.600"}},m:"0",w:"100%",borderRadius:"0",onClick:()=>t(!1),children:(0,o.jsxs)(a.k,{flexDir:"column",align:"start",ml:"1rem",children:[(0,o.jsx)(c.x,{fontSize:"lg",mb:"-0rem",color:"gray.800",_dark:{color:"gray.200"},children:"Realtime mode"}),(0,o.jsx)(c.x,{fontSize:"sm",color:"gray.700",_dark:{color:"gray.300"},children:"Write your prompt and see changes in real-time"})]})}),(0,o.jsx)(X.s,{color:"gray.800",_hover:{bg:"gray.200"},_dark:{color:"gray.100",_hover:{bg:"gray.600"}},m:"0",w:"100%",borderRadius:"0",onClick:()=>t(!0),className:"guided-mode-button",children:(0,o.jsxs)(a.k,{flexDir:"column",align:"start",ml:"1rem",children:[(0,o.jsx)(c.x,{fontSize:"lg",mb:"-0rem",color:"gray.800",_dark:{color:"gray.200"},children:"Guided mode"}),(0,o.jsx)(c.x,{fontSize:"sm",color:"gray.700",_dark:{color:"gray.300"},children:"Command AI to create and edit"})]})})]})]}):(0,o.jsx)(p.z,{"aria-label":"Prompt mode",variant:"ghost",colorScheme:"gray",flexDir:"row",h:"calc(2.25rem - 2px)",w:"calc(8rem - 2px)",border:"2px solid",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},my:"0.25rem",onClick:()=>{u(),g(!0)},position:"relative",className:"promptModeButton",children:(0,o.jsxs)(a.k,{flexDir:"row",align:"center",justify:"center",children:[(0,o.jsx)(s.J,{as:C.C3G,h:"1.5rem",w:"1.5rem",mr:"0.25rem"}),(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:r?"Guided":"Real-time"}),(0,o.jsx)(h.v,{color:"gray.800",_dark:{color:"gray.200"}})]})})};var er=t(96854),et=t(32568),eo=t(52091);let ea=e=>{let{suggestions:r,setPrompt:t,suggestionPrompt:a,highlightedText:i,isMobile:n}=e,l=e=>{_.ZP.capture("Prompt suggestion click");let r=a.replace("$(suggestion)",e);t(r)},s=()=>{t(a.replace("$(suggestion)",i))};return(0,o.jsxs)(w.U,{my:"0.25rem",h:"2.25rem",w:"40rem",maxW:"96vw",children:[(0,o.jsx)(z.h,{"aria-label":"Revert",colorScheme:"black",borderRadius:"0.5rem",onClick:s,p:"0",icon:(0,o.jsx)(eo.wXW,{size:"1.1em"})}),0===r.length?Array.from({length:n?3:4}).map((e,r)=>(0,o.jsx)(er.O,{height:"2rem",width:"100%",borderRadius:"0.5rem"},r)):r.slice(0,n?3:4).map(e=>(0,o.jsx)(et.u,{label:n?"":e,placement:"top",children:(0,o.jsx)(p.z,{"aria-label":"Suggestions",variant:"ghost",colorScheme:"gray",flexDir:"row",w:"100%",border:"1px",borderRadius:"0.5rem",color:"gray.800",p:"0",_dark:{color:"gray.200"},onClick:()=>l(e),children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},isTruncated:!0,px:"6px",children:e})})},e))]})};var ei=t(76506);let en=e=>{let{setPrompt:r,disableButtons:t}=e,[i,l]=(0,n.useState)(!1);return(0,o.jsxs)(p.z,{variant:"ghost",colorScheme:"gray",flexDir:"row",h:"2.25rem",border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},cursor:"pointer",pointerEvents:"auto",my:"0.25rem",display:"flex",onClick:function(){i||(_.ZP.capture("Random prompt"),r((0,ei.Y)()),l(!0),setTimeout(()=>{l(!1)},1e3))},isDisabled:t||i,children:[(0,o.jsx)(s.J,{as:eo.AyN,h:"1.5rem",w:"1.5rem",color:"gray.800",_dark:{color:"gray.200"}}),(0,o.jsx)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.25rem",children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:"Random prompt"})})]})};var el=t(81136);let es=e=>{var r,t;let{accountDetails:i,uploadImage:l,setUploadImage:s,setGenerateMode:c,promptInputRef:d,isMobile:m}=e,g="".concat(i.customerId,"-stablevideo"),p=(null==l?void 0:l.imageData)||(null==l?void 0:l.url),u=Number(null==d?void 0:null===(r=d.current)||void 0===r?void 0:r.scrollHeight)>Number(null==d?void 0:null===(t=d.current)||void 0===t?void 0:t.clientHeight);return(0,n.useEffect)(()=>{let e=async()=>{if(!(null==l?void 0:l.uuid)){s(void 0),c("turbo");return}let e=await fetch("/api/assets/getImportImage?projectId=".concat(g,"&uuid=").concat(null==l?void 0:l.uuid));if(!e.ok)return;let r=await e.json();return r},r=async e=>{let r=await fetch(e),t=await r.json();return t},t=async()=>{let t=await e();if(!t||!t.faceFeaturesUrl){s(void 0),c("turbo");return}let o=await r(t.faceFeaturesUrl);if(!o){s(void 0),c("turbo");return}l.faceFeatures=o,l.url=t.assetUrl,s(l)};l&&!l.faceFeatures&&t()},[l]),(0,o.jsxs)(o.Fragment,{children:[p?(0,o.jsx)(P.E,{src:p,alt:"Reference Image",position:"absolute",right:m?"0.5rem":u?"1.5rem":"0.5rem",top:"0.6rem",maxH:"7.5rem",maxW:"7.5rem",borderRadius:"0.5rem",zIndex:1}):(0,o.jsx)(a.k,{position:"absolute",right:"0.5rem",top:"0.6rem",w:"7.5rem",h:"7.5rem",bg:"gray.100",_dark:{bg:"gray.800"},borderRadius:"0.5rem",zIndex:1,justifyContent:"center",alignItems:"center",children:(0,o.jsx)(el.$,{size:"lg",color:"gray.400"})}),(0,o.jsx)(z.h,{icon:(0,o.jsx)(D.T,{color:"white",boxSize:"0.75rem"}),"aria-label":"close",pos:"absolute",w:"2rem",h:"2rem",top:"0.5rem",right:m?"0.5rem":u?"1.5rem":"0.5rem",variant:"ghost",bg:"grayAlpha.100",_hover:{bg:"gray.800"},onClick:()=>{s(void 0),c("turbo")},zIndex:1})]})},ec=e=>{let{prompt:r,highlightedText:t,setShouldSuggestPrompt:i,setSuggestions:l}=e,[d,m]=(0,n.useState)(!1),g=(0,n.useCallback)(async(e,r)=>{let t=await fetch("/api/prompt/getNewPrompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"variety",prompt:e,selection:r})});if(t.ok){let e=await t.json();l(e.prompt)}},[]);async function u(){i(!0),l([]),m(!0),_.ZP.capture("Prompt suggestion"),await g(r,t),m(!1)}return(0,o.jsxs)(p.z,{variant:"ghost",colorScheme:"gray",flexDir:"row",h:"2.25rem",border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},cursor:"pointer",pointerEvents:"auto",isDisabled:d,my:"0.25rem",onClick:u,display:"flex",children:[(0,o.jsx)(s.J,{as:C.mz3,h:"1.5rem",w:"1.5rem",color:"gray.800",_dark:{color:"gray.200"}}),(0,o.jsx)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.25rem",children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:"Get suggestions"})})]})};var ed=t(61121);async function em(e,r,t){let o=Date.now(),a=e.name.split(".").pop(),i=await ep(o.toString(),r,e.type,t,a),n=i.presignedUrl,l=await fetch(n,{method:"PUT",body:e});if(200!==l.status)throw Error("Failed to upload file to S3");return i.s3Key}async function eg(e,r,t){let o=Date.now(),a=await ep(o.toString(),r,"application/json",t),i=a.presignedUrl,n=await fetch(i,{method:"PUT",headers:{"Content-Type":"application/json"},body:e});if(200!==n.status)throw Error("Failed to upload file to S3");return a.s3Key}async function ep(e,r,t,o,a){let i=await fetch("/api/assets/getImportUrl?projectId=".concat(o,"&filename=").concat(e,"&prefix=").concat(r,"&contentType=").concat(t,"&fileExtension=").concat(a)),n=await i.json();return n}var eu=t(76770),eh=t.n(eu);let ex=e=>{let r="";r="string"==typeof e?e:URL.createObjectURL(e);let t=new Image;return t.src=r,new Promise((e,r)=>{t.addEventListener("error",()=>r(Error("The media resource is either invalid, corrupt or unsuitable"))),t.addEventListener("load",()=>e(!0),!1)})},ey=(e,r)=>new Promise(t=>{eh().imageFileResizer(e,1024,1024,"webp",80,0,e=>{t(e)},r)}),ef=["image/png","image/jpg","image/jpeg","image/webp"],eb=["png","jpeg","jpg","webp"],ew=e=>{let{accountDetails:r,safetyFilter:t,setMode:i,setUploadImage:l,setJobInProgress:d}=e,m="".concat(null==r?void 0:r.customerId,"-stablevideo"),g=(0,n.useRef)(null),p=(0,S.p)(),u=()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.style.display="none",e.addEventListener("change",h),g.current=e,document.body.appendChild(e),g.current.click()},h=async e=>{if(null===e.target)return;let r=e.target.files;if(null===r||0===r.length)return;let o=r[0],a=!1,n=!1;try{for(let e=0;e<ef.length;e++){let r=ef[e];if(o.type===r){a=!0;break}}for(let e=0;e<eb.length;e++){let r=eb[e];if(o.name.endsWith(".".concat(r))){n=!0;break}}if(!a||!n)throw Error("".concat(o.name," is not a supported file. Supported files are: ").concat(eb.map(G.upperCase).join(", ")));await ex(o);let e=URL.createObjectURL(o),r=new Image;r.onload=async()=>{URL.revokeObjectURL(e),l({height:r.height,width:r.width})},r.src=e;let s=await ey(o,"base64"),c=s.split(",")[1];i("upload");let g=await fetch("/api/turbo/checkImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:c,safetyFilter:t})});if(403===g.status)throw Error("Image was rejected by the safety filter. Please try another image or remove the safety filter.");if(400===g.status)throw Error("Image is corrupted. Please try another image.");if(200!==g.status)throw Error("Upload image failed unexpectedly, please try again");let p=await em(o,"assets/images",m),u=await fetch("/api/assets/putImageMetadata?projectId=".concat(m),{method:"POST",body:JSON.stringify({assetKey:p})});if(!u.ok)throw Error("Upload image failed unexpectedly, please try again");let h=await u.json(),x=h.uuid;_.ZP.capture("Upload starting image"),l({key:p,uuid:x,height:r.height,width:r.width}),d(!0),setTimeout(()=>{d(!1)},1e4)}catch(e){_.ZP.capture("Upload starting failed",{error:e.message}),p({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),i("turbo")}};return r?(0,o.jsxs)(a.k,{flexDir:"row",align:"center",w:"100%",py:"0.5rem",px:"1rem",color:"gray.800",_hover:{bg:"gray.200"},_dark:{color:"gray.100",_hover:{bg:"gray.600"}},cursor:"pointer",onClick:u,children:[(0,o.jsx)(s.J,{as:eo.H3h,h:"1.5rem",w:"1.5rem",color:"gray.800",_dark:{color:"gray.200"}}),(0,o.jsxs)(a.k,{flexDir:"column",align:"start",ml:"1rem",children:[(0,o.jsx)(c.x,{fontSize:"lg",mb:"-0rem",color:"gray.800",_dark:{color:"gray.200"},children:"Upload starting image"}),(0,o.jsx)(c.x,{fontSize:"sm",color:"gray.700",_dark:{color:"gray.300"},children:"Use as the starting image for your generation"})]})]}):null};var ej=t(5674),ek=t(35541),ev=t(83589),eS=t(14581),eC=t(66205),e_=t(49289),eR=t(78633),eD=t(7423),eP=t(4758);let ez=["image/png","image/jpg","image/jpeg","image/webp"],eI=["png","jpeg","jpg","webp"],eE=["Oppenheimer","LisaBlackpink","MorganFreeman","TaylorSwift","RobertDowneyJr","JoeRogan","SydneySweeney","ViratKohli","SerenaWilliams","ElonMusk","Einstein","MargotRobbie"],eT=e=>{let{setUploadImage:r,setMode:t,isMobile:i,closeModal:n}=e;async function l(e){_.ZP.capture("Reference person example",{example:eE[e]}),t("reference");let o=await fetch("".concat(eP.hb,"/public/referencePeople/").concat(e,"-v2.json")),a=await o.json();r({key:"sample-people/".concat(e,".webp"),uuid:"sample-people-".concat(e),faceFeatures:a,url:"".concat(eP.hb,"/public/referencePeople/").concat(e,".webp"),faceFeaturesKey:"public/referencePeople/".concat(e,"-v2.json")}),n()}return(0,o.jsxs)(a.k,{flexDir:"column",children:[(0,o.jsx)(c.x,{fontSize:"16px",m:"0.5rem",w:"100%",textAlign:"center",color:"gray.800",_dark:{color:"gray.100"},children:"Try a reference person"}),(0,o.jsx)(ej.M,{columns:4,children:Array.from({length:12}).map((e,r)=>(0,o.jsx)(j.xu,{width:i?"80px":"120px",height:i?"106px":"160px",maxH:i?"8rem":"10rem",borderRadius:"0.5rem",m:"0.2rem",cursor:"pointer",onClick:()=>l(r),borderColor:"gray.600",_hover:{opacity:.8},overflow:"hidden",position:"relative",children:(0,o.jsx)(P.E,{src:"".concat(eP.hb,"/public/referencePeople/").concat(r,".webp"),alt:"Example face ".concat(r+1)})},r))})]})},eU=e=>{let{accountDetails:r,safetyFilter:t,setUploadImage:i,setMode:l,closeModal:s}=e,d="".concat(r.customerId,"-stablevideo"),m=(0,n.useRef)(null),g=(0,S.p)();async function u(e){if(null===e.target)return;s();let r=e.target.files;if(null===r||0===r.length)return;let o=r[0],a=!1,n=!1;try{for(let e=0;e<ez.length;e++){let r=ez[e];if(o.type===r){a=!0;break}}for(let e=0;e<eI.length;e++){let r=eI[e];if(o.name.endsWith(".".concat(r))){n=!0;break}}if(!a||!n)throw Error("".concat(o.name," is not a supported file. Supported files are: ").concat(eI.map(G.upperCase).join(", ")));await ex(o);let e=await ey(o,"base64"),r=e.split(",")[1];l("reference");let s=await fetch("/api/turbo/checkImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r,safetyFilter:t})});if(403===s.status)throw Error("Image was rejected by the safety filter. Please try another image or remove the safety filter.");if(400===s.status)throw Error("Image is corrupted. Please try another image.");if(200!==s.status)throw Error("Upload reference person failed unexpectedly, please try again");let c=await fetch("/api/turbo/getFaceFeatures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r})});if(400===c.status)throw Error("Failed to identify a face from the image. Please try another image.");if(200!==c.status)throw Error("Upload reference person failed unexpectedly, please try again");let m=await c.json(),g=await em(o,"assets/images",d),p=await eg(JSON.stringify(m),"assets/images",d),u=await fetch("/api/assets/putImageMetadata?projectId=".concat(d),{method:"POST",body:JSON.stringify({assetKey:g,faceFeaturesKey:p})});if(!u.ok)throw Error("Upload image failed unexpectedly, please try again");let h=await u.json(),x=h.uuid;i({key:g,uuid:x,faceFeatures:m,imageData:e,faceFeaturesKey:p}),_.ZP.capture("Upload reference person")}catch(e){_.ZP.capture("Upload reference failed",{error:e.message}),g({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"}),i(void 0),l("turbo")}}return(0,o.jsxs)(a.k,{flexDir:"column",align:"center",justify:"center",w:"12rem",children:[(0,o.jsx)(c.x,{fontSize:"16px",mb:"0.5rem",w:"100%",textAlign:"center",color:"gray.800",_dark:{color:"gray.100"},children:"Upload your own"}),(0,o.jsx)(c.x,{fontSize:"14px",color:"gray.700",_dark:{color:"gray.400"},mb:"1rem",textAlign:"center",children:"Image must be a clear photo of a person's face"}),(0,o.jsx)(p.z,{variant:"solid",w:"7rem",h:"2rem",borderRadius:"0.5rem",onClick:function(){let e=document.createElement("input");e.type="file",e.accept="image/*",e.style.display="none",e.addEventListener("change",u),m.current=e,document.body.appendChild(e),m.current.click()},mb:"1rem",children:"Upload"})]})},eF=()=>(0,o.jsxs)(a.k,{flexDir:"column",align:"center",justify:"center",w:"12rem",children:[(0,o.jsx)(c.x,{fontSize:"16px",m:"0.5rem",w:"100%",textAlign:"center",color:"gray.900",_dark:{color:"gray.100"},children:"Upload your own"}),(0,o.jsx)(c.x,{fontSize:"14px",color:"gray.800",_dark:{color:"gray.400"},mb:"1rem",textAlign:"center",children:"Upgrade to upload your own reference person"}),(0,o.jsx)(E.r,{href:"/pricing",children:(0,o.jsx)(p.z,{variant:"solid",w:"7rem",h:"2rem",borderRadius:"0.5rem",onClick:()=>_.ZP.capture("Upgrade clicked",{referrer:"Reference person upload"}),children:"Upgrade"})})]}),eM=e=>{let{accountDetails:r,safetyFilter:t,setMode:i,setUploadImage:l,isMobile:d}=e,[m,g]=(0,n.useState)(!1),p=(0,eD.ZP)().width,u=d||p<900,h=()=>g(!1);return r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.k,{flexDir:"row",align:"center",w:"100%",py:"0.5rem",px:"1rem",color:"gray.800",_hover:{bg:"gray.200"},_dark:{color:"gray.100",_hover:{bg:"gray.600"}},cursor:"pointer",onClick:()=>g(!0),children:[(0,o.jsx)(s.J,{as:eR.IaE,h:"1.75rem",w:"1.75rem",color:"gray.800",mx:"-0.125rem",_dark:{color:"gray.200"}}),(0,o.jsxs)(a.k,{flexDir:"column",align:"start",ml:"1rem",children:[(0,o.jsx)(c.x,{fontSize:"lg",mb:"-0rem",color:"gray.800",_dark:{color:"gray.200"},children:"Use reference person"}),(0,o.jsx)(c.x,{fontSize:"sm",color:"gray.700",_dark:{color:"gray.300"},children:"Create consistent images of a specific person"})]})]}),(0,o.jsxs)(ek.u_,{isOpen:m,onClose:h,isCentered:!0,children:[(0,o.jsx)(ev.Z,{bg:"whiteAlpha.500",_dark:{bg:"blackAlpha.500"},backdropFilter:"blur(20px)"}),(0,o.jsxs)(eS.h,{maxH:"95vh",my:"2rem",mx:"0.5rem",w:"auto",maxW:u?"100vw":"calc(100vw - 8rem)",border:"1px",borderColor:"gray.100",_dark:{borderColor:"gray.800"},borderRadius:"0.5rem",children:[(0,o.jsx)(eC.o,{border:0,cursor:"pointer",size:"lg",mt:"-0.25rem",mr:"-0.5rem",_focus:{boxShadow:"none"},_dark:{color:"white"}}),(0,o.jsx)(a.k,{p:u?"0.25rem":"1rem",flexDir:"column",alignItems:"start",objectFit:"contain",borderRadius:"0.3rem",pt:"1.5rem",bg:"gray.100",_dark:{bg:"gray.800"},children:(0,o.jsxs)(a.k,{flexDir:u?"column":"row",align:"center",children:[(0,o.jsx)(eT,{setUploadImage:l,setMode:i,isMobile:u,closeModal:h}),!u&&(0,o.jsx)(e_.i,{orientation:"vertical",h:"31rem",w:"1px",mx:"1rem",mt:"2rem",color:"gray.900",_dark:{color:"gray.600"}}),u&&(0,o.jsx)(e_.i,{orientation:"horizontal",h:"1px",w:"85vw",my:"1rem",color:"gray.900",_dark:{color:"gray.600"}}),"none"===r.planType?(0,o.jsx)(eF,{}):(0,o.jsx)(eU,{accountDetails:r,safetyFilter:t,setUploadImage:l,setMode:i,closeModal:h})]})})]})]})]}):null};var eO=t(93754);let eJ=e=>{let{accountDetails:r,safetyFilter:t,setMode:i,setUploadImage:n,isMobile:l,disabled:h,setJobInProgress:x}=e,{isOpen:y,onToggle:f,onClose:b}=(0,d.q)(),{showModal:w}=(0,B.d)(eO.z);return(0,o.jsxs)(m.J,{placement:"top",isOpen:y,onClose:b,children:[(0,o.jsx)(g.x,{children:(0,o.jsxs)(p.z,{variant:"ghost",colorScheme:"gray",flexDir:"row",h:"2.25rem",border:"0px",borderRadius:"0.5rem",color:"gray.800",_dark:{color:"gray.200"},cursor:"pointer",pointerEvents:"auto",my:"0.25rem",isDisabled:h,onClick:()=>{r||w(),f()},children:[(0,o.jsx)(s.J,{as:ed.d7P,h:"1.5rem",w:"1.5rem",color:"gray.800",_dark:{color:"gray.200"}}),(0,o.jsx)(a.k,{flexDir:"row",align:"center",justify:"center",ml:"0.25rem",children:(0,o.jsx)(c.x,{fontSize:"14px",userSelect:"none",color:"gray.800",_dark:{color:"gray.200"},children:"Upload"})})]})}),(0,o.jsxs)(u.y,{bg:"gray.100",_dark:{bg:"gray.800"},boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.5)",w:"22rem",children:[(0,o.jsx)(ew,{accountDetails:r,safetyFilter:t,setMode:i,setUploadImage:n,setJobInProgress:x}),(0,o.jsx)(eM,{accountDetails:r,safetyFilter:t,setMode:i,setUploadImage:n,isMobile:l})]})]})},eL=e=>{let{setControlBarMode:r,promptInputRef:t,generateMode:s,setGenerateMode:c,aspectRatio:d,setAspectRatio:m,prompt:g,setPrompt:p,accountDetails:u,watermark:h,setWatermark:x,safetyFilter:y,setSafetyFilter:f,uploadImage:w,setUploadImage:j,isMobile:k,maskedCanvas:S,setMaskedCanvas:C,setSeed:_,originalPrompt:D,originalSeed:P,setJobInProgress:z}=e,E=(0,n.useRef)(null),T="masking"===s||"edit"===s,[U,F]=(0,n.useState)(!1),[M,O]=(0,n.useState)("default"),[J,L]=(0,n.useState)(!1),{isTourInProgress:W,currentStep:A}=(0,l.r)();(0,n.useEffect)(()=>{W&&0==A&&Y(!1)},[W,A]);let[Z,G]=(0,n.useState)([]),[K,H]=(0,n.useState)(""),[B,V]=(0,n.useState)(""),[$,Y]=(0,n.useState)(!1),[X,Q]=(0,n.useState)(""),[er,et]=(0,n.useState)(""),eo=()=>{Q(""),et(""),p("")};return"upload"===s?null:(0,o.jsxs)(a.k,{ref:E,flexDir:"column",alignItems:"center",maxW:"calc(100vw - 1rem)",my:"1rem",mt:"0.5rem",children:["default"===M&&(0,o.jsxs)(a.k,{flexDir:"row",w:"100%",alignItems:"flex-end",className:"random-prompt-button",children:[!$&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(en,{setPrompt:p,disableButtons:T}),(0,o.jsx)(R,{prompt:g,setPrompt:p,disableButtons:T||$,generatingPrompt:U,setGeneratingPrompt:F})]}),$&&(0,o.jsx)(v,{lastGuidedPrompt:X,disableButtons:T,handleClearPrompt:eo})]}),"suggestion"===M&&(0,o.jsxs)(a.k,{flexDir:"row",w:"100%",alignItems:"flex-start",children:[!J&&(0,o.jsx)(ec,{prompt:g,highlightedText:B,setShouldSuggestPrompt:L,setSuggestions:G}),J&&(0,o.jsx)(ea,{isMobile:k,setPrompt:p,suggestions:Z,suggestionPrompt:K,highlightedText:B})]}),(0,o.jsxs)(a.k,{pos:"relative",alignItems:"center",maxW:"calc(100vw - 1rem)",children:[(0,o.jsx)(q,{guidedMode:$,guidedPrompt:er,setGuidedPrompt:et,promptInputRef:t,promptAreaRef:E,prompt:g,setPrompt:p,mode:s,setLastGuidedPrompt:Q,disabled:"masking"===s,generatingPrompt:U,setToolbarMode:O,setSuggestions:G,setSuggestionPrompt:H,setHighlightedText:V,setShouldSuggestPrompt:L}),"reference"===s&&u&&(0,o.jsx)(es,{promptInputRef:t,isMobile:k,accountDetails:u,uploadImage:w,setUploadImage:j,setGenerateMode:c}),"edit"===s&&(0,o.jsx)(I,{guidedMode:$,uploadImage:w,setControlBarMode:r,generateMode:s,setPrompt:p,maskedCanvas:S,setMaskedCanvas:C,setGenerateMode:c,setSeed:_,originalPrompt:D,originalSeed:P})]}),(0,o.jsxs)(a.k,{flexDir:"row",w:"100%",children:[(0,o.jsx)(b,{aspectRatio:d,setAspectRatio:m,disabled:T}),(0,o.jsx)(ee,{accountDetails:u,guidedMode:$,setGuidedMode:Y}),!$&&(0,o.jsx)(eJ,{disabled:T,accountDetails:u,safetyFilter:y,setMode:c,setUploadImage:j,isMobile:k,setJobInProgress:z}),(0,o.jsx)(i.L,{}),(0,o.jsx)(N,{accountDetails:u,watermark:h,setWatermark:x,safetyFilter:y,setSafetyFilter:f})]})]})};var eW=eL}}]);